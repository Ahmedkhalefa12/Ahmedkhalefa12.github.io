(()=>{"use strict";var e,t={9814:(e,t,n)=>{var r=n(3313),o=n.n(r),a=n(4012),s=(n(8995),n(8183),n(4403)),l=n.n(s),i=(n(425),n(5615));const c=r.createContext(void 0),u=r.createContext(void 0),d=new i.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchInterval:!1,refetchOnMount:!1,staleTime:1/0}}}),m=e=>{const{children:t,sourceApp:n,overrideGranite:o}=e,[a,s]=r.useState(0),[l,m]=r.useState(""),[p,h]=r.useState(!0);return r.createElement(c.Provider,{value:{isModalAnimatingIn:p,questionId:a,sourceApp:n,overrideGranite:o,redirectPath:l}},r.createElement(u.Provider,{value:{setIsModalAnimatingIn:h,setQuestionId:s,setRedirectPath:m,reset:()=>{s(0),m("")}}},r.createElement(i.QueryClientProvider,{client:d},t)))},p=()=>{const e=r.useContext(c);if(void 0===e)throw new Error("useAAQState must be used within a AAQProvider.");return e},h=()=>{const e=r.useContext(u);if(void 0===e)throw new Error("useAAQSetter must be used within a AAQProvider.");return e},g=()=>{const e=r.useContext(c),t=r.useContext(u);if(void 0===t||void 0===e)throw new Error("useAAQContext was used outside of its Provider");return{...e,...t}};var f=n(4823),E=n.n(f),v=n(3355);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}E().setAppElement("body");const w=r.forwardRef((function({overlayClassName:e,...t},n){const{isOpen:o,closeModal:a=(()=>{}),children:s,className:i,variant:c="lg",showX:u=!0,closeOnClickOutside:d=!0,padding:m,...p}=t;return(0,r.useEffect)((()=>{const e=document.body;if(o)return e.classList.contains("modal-open")||e.classList.add("modal-open"),()=>{e.classList.contains("modal-open")&&e.classList.remove("modal-open")}}),[o]),r.createElement(r.Fragment,null,r.createElement(E(),b({isOpen:o,onRequestClose:d?a:void 0,overlayClassName:"modal d-block",className:l()(`modal-dialog modal-dialog-centered modal-${c}`,i)},p),r.createElement(v.x,{padding:m,className:"modal-content",ref:n},s,u&&r.createElement("button",{type:"button",className:"modal-close p-0 m-0 border-0 bg-transparent",onClick:a,"aria-label":"Close modal"},r.createElement("i",{className:"chi-remove"}))),r.createElement(y,{className:e})))}));function y({className:e}){return a.createPortal(r.createElement("div",{className:l()("modal-backdrop show",e)}),document.body)}const S="granite-slab";function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}const C=({children:e,disabled:t,className:n,...o})=>r.createElement(v.x,N({},o,{className:l()({[S]:!t},n)}),e);let T;!function(e){e[e.REST=0]="REST",e[e.PREP=1]="PREP",e[e.RUN=2]="RUN",e[e.HOLD=3]="HOLD",e[e.RETURN=4]="RETURN"}(T||(T={}));var I=n(8974);const O=()=>{},x=(e,t)=>{var n,r;((...e)=>{e.forEach((e=>e.style.transformOrigin="0 0"))})(t.element),n=t.element,r={transform:`translate(${e.offsetLeft-t.offsetLeft}px, ${e.offsetTop-t.offsetTop}px) scale(${e.width/t.width}, ${e.height/t.height})`,borderRadius:`${e.borderRadius}`},(0,I.Z)(r,((e,t)=>{n.style[t]=e}))},R=(...e)=>{e.forEach((e=>{e.style.transform="",e.style.borderRadius=""}))},A=e=>{var t,n,o,a,s,l,i,c,u;const[d,m]=r.useState(T.REST);var p;"to"in e||(p={id:e.id,from:e.from,setFromVisible:e.setFromVisible,fromBorderRadius:e.fromBorderRadius},window.magicTransform||(window.magicTransform={}),window.magicTransform[p.id]||(window.magicTransform[p.id]={}),window.magicTransform[p.id].from=p.from,window.magicTransform[p.id].setFromVisibility=p.setFromVisible,window.magicTransform[p.id].fromBorderRadius=p.fromBorderRadius);const h="from"in e?null!=(t=e.from.current)?t:null:null!=(n=null==(o=window.magicTransform)||null==(a=o[e.id].from)?void 0:a.current)?n:null,g="setFromVisible"in e?e.setFromVisible:null!=(s=null==(l=window.magicTransform)?void 0:l[e.id].setFromVisibility)?s:null,f="fromBorderRadius"in e?e.fromBorderRadius:null!=(i=null==(c=window.magicTransform)?void 0:c[e.id].fromBorderRadius)?i:null,E="to"in e&&null!=(u=e.to.current)?u:null,v="doTransform"in e,b="doTransform"in e&&e.doTransform,w="transitionTime"in e?e.transitionTime:0,y="setToVisible"in e?e.setToVisible:null,S="toBorderRadius"in e?e.toBorderRadius:null,N="setIsToTransformingIn"in e?e.setIsToTransformingIn:O;r.useEffect((()=>{if(!v||!E||!S)return;if(!h||!f)return b&&(N(!0),setTimeout((()=>N(!1)),w)),void(null==y||y(b));const e=((e,t,n,r)=>{const o=(e,t)=>e instanceof HTMLElement?o(e.offsetParent,t)+e[t]:0;return{from:{element:e,height:e.offsetHeight,width:e.offsetWidth,offsetLeft:o(e,"offsetLeft"),offsetTop:o(e,"offsetTop"),borderRadius:n},to:{element:t,height:t.offsetHeight,width:t.offsetWidth,offsetLeft:o(t,"offsetLeft"),offsetTop:o(t,"offsetTop"),borderRadius:r}}})(h,E,f,S),t=e=>{e.target===E&&(N(!1),E.removeEventListener("transitionend",t),E.removeEventListener("transitioncancel",t))};switch(d){case T.REST:return void(b&&(null==g||g(!1),m(T.PREP)));case T.PREP:return void window.requestAnimationFrame((()=>{x(e.from,e.to),window.requestAnimationFrame((()=>{m(T.RUN)}))}));case T.RUN:return void window.requestAnimationFrame((()=>{((e,...t)=>{t.forEach((t=>t.style.transition=`border-radius ${e}ms linear, transform ${e}ms linear`))})(w,e.from.element,e.to.element),x(e.to,e.from),R(e.to.element),null==y||y(!0),N(!0),m(T.HOLD),E.addEventListener("transitionend",t),E.addEventListener("transitioncancel",t)}));case T.HOLD:return void(b||m(T.RETURN));case T.RETURN:return void window.requestAnimationFrame((()=>{R(e.from.element),null==g||g(!0),x(e.from,e.to),null==y||y(!1),setTimeout((()=>{((...e)=>{((...e)=>{e.forEach((e=>e.style.transformOrigin=""))})(...e),R(...e),((...e)=>{e.forEach((e=>e.style.transition=""))})(...e)})(e.from.element,e.to.element),m(T.REST)}),w)}))}}),[v,b,w,d,h,E,y,g,N,f,S])};var L=n(4088),k=n(9317),_=(n(2963),n(7765));const P="step-Z0VrL",D="step-active-FmhIq",F="step-done-HwSmo",U="step-default-icon-AH02P",M="step-other-icon-KxgsK",j="step-label-wMBBe",q="override-granite-sMmOQ",G="step-active-icon-XMiMu";function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(this,arguments)}const B=r.createContext(null),W=r.forwardRef((function({currentStepIdx:e,children:t,id:n,className:o,overrideGranite:a,...s},i){const c=(0,L.M)(),u=n||`stepper-${c}`,d=r.Children.toArray(t)[0];if(!r.isValidElement(d)||d.type!==V)throw new Error("First child of `Stepper` must be `StepList`");const m=r.Children.toArray(d.props.children),p=m.filter(r.isValidElement).filter((e=>e.type===H));if(p.length!==m.length)throw new Error("Children of `StepList` must be `Step`s");const h=r.isValidElement(m[0])&&r.Children.toArray(m[0].props.children)[0];if(!r.isValidElement(h)||h.type!==z)throw new Error("First child of `Step` must be `StepIcon`");const g=r.isValidElement(m[0])&&r.Children.toArray(m[0].props.children)[1];if(!r.isValidElement(g)||g.type!==X)throw new Error("Second child of `Step` must be `StepLabel`");const[f,E]=r.useState(null),b=[];for(let t=0;t<p.length;t++){const n=e===t,o=void 0!==e&&e>t,s=`${u}-${t}`,l=`${s}-step`,i=`${s}-step-icon`,c=`${s}-step-label`,d=t===f;b.push(r.createElement(B.Provider,{value:{index:t,parentId:u,stepId:l,stepIconId:i,stepLabelId:c,isActive:n,isDone:o,hasError:d,setErrorStepIdx:E,overrideGranite:a}}))}const w=l()("d-block w-100",o);return r.createElement(v.x,Q({},s,{id:u,ref:i,className:w}),r.cloneElement(d,{},r.Children.map(d.props.children,((e,t)=>r.isValidElement(e)?r.cloneElement(b[t],{},e):e))))})),V=r.forwardRef((function({as:e="ul",className:t,...n},o){const a=l()("d-flex",t);return r.createElement(v.x,Q({},n,{as:e,ref:o,className:a}))})),H=r.forwardRef((function({as:e="li",className:t,children:n,hasError:o=!1,...a},s){const i=r.useContext(B);if(!i)throw new Error;const{stepId:c,stepLabelId:u,isActive:d,isDone:m,setErrorStepIdx:p,index:h,overrideGranite:g}=i;r.useEffect((()=>{o&&p(h)}),[o,h,p]);const f=l()("d-flex flex-column",P,{[D]:d&&!o,[F]:m,[q]:g},t);return r.createElement(v.x,Q({},a,{ref:s,as:e,id:c,className:f,"aria-current":!!d&&"step","aria-labelledby":u}),n)})),z=r.forwardRef((function({stepActiveIcon:e,stepDoneIcon:t,stepDefaultIcon:n,stepErrorIcon:o,className:a,...s},i){const c=r.useContext(B);if(!c)throw new Error;const{stepIconId:u,overrideGranite:d}=c,m=r.useMemo((()=>{const a=e||r.createElement(Y,c),s=t||r.createElement(K,c),l=o||r.createElement(Z,c),i=n||r.createElement(J,c);return(({hasError:e,isActive:t,isDone:n,stepDefaultIcon:r,stepActiveIcon:o,stepDoneIcon:a,stepErrorIcon:s})=>{switch(!0){case e:return s;case t:return o;case n:return a;default:return r}})({...c,stepActiveIcon:a,stepDoneIcon:s,stepErrorIcon:l,stepDefaultIcon:i})}),[c,e,t,o,n]);return r.createElement(v.x,Q({},s,{className:l()("d-flex justify-content-center",{[q]:d},a),ref:i,id:u}),m)})),Y=({index:e,overrideGranite:t})=>r.createElement("div",{className:l()("rounded-circle border-primary-a700 bg-primary-a700 text-neutral-100 font-weight-bold text-center",U,G,{[q]:t}),"aria-label":"Current step"},e+1),K=({overrideGranite:e})=>r.createElement(_.J,{icon:"check-circle-filled",className:l()("text-alternative-success-green",M,{[q]:e}),"aria-label":"Step complete"}),J=({index:e,overrideGranite:t})=>r.createElement("div",{className:l()("text-center text-neutral-600",U,{[q]:t}),"aria-label":"Future step"},e+1),Z=({overrideGranite:e})=>r.createElement(_.J,{icon:"alert-filled",className:l()("text-alternative-danger-red",M,{[q]:e}),"aria-label":"Step error"}),X=r.forwardRef((function({children:e,className:t,...n},o){const a=r.useContext(B);if(!a)throw new Error;const{stepLabelId:s,isActive:i,hasError:c,overrideGranite:u}=a;return r.createElement(v.x,Q({},n,{className:l()("text-center mt-2",{"font-weight-500":i,"text-neutral-600":!i&&!c,"text-alternative-danger-red":c,[q]:u},j,t),ref:o,id:s}),e)}));let ee;!function(e){e[e.XS=0]="XS",e[e.SM=575.98]="SM",e[e.MD=767.98]="MD",e[e.LG=959.98]="LG",e[e.XL=1199.98]="XL"}(ee||(ee={}));const te=()=>re(`(max-width: ${ee.SM}px)`),ne=()=>{const e=te(),t=re(`(min-width: ${ee.SM}px) and (max-width: ${ee.LG}px)`);return{isMobile:e,isTablet:t,isDesktop:!e&&!t}};function re(e,t=(()=>!1)){const[n,o]=r.useState(t);return r.useEffect((()=>{const t=function(e){const t=window.matchMedia(e);t.addEventListener||(t.addEventListener=(e,n)=>t.addListener(n),t.removeEventListener=(e,n)=>t.removeListener(n));return t}(e),n=({matches:e})=>o(e);return o(t.matches),t.addEventListener("change",n),()=>t.removeEventListener("change",n)}),[e]),n}var oe=n(8433);const ae="aaq-modal-gnMs1",se="visible-_vQOh",le="close-modal-yVwsp",ie="override-granite-kseWE",ce="close-modal-confirmation-_7Vq3",ue="close-modal-overlay-E8ElZ",de="aaq-modal-header-hvc6t",me="aaq-modal-header-list-IarMQ",pe="aaq-modal-header-list-item-nwZqJ",he="aaq-modal-stepper-d9IJI",ge="check-icon-jTyn8",fe="step-active-icon-RnY6T",Ee="step-default-icon-EH4tm",ve="aaq-overlay-WYrWe",be="granite-slab-iNqEO",we=()=>r.createElement(oe.Z,{className:l()("text-primary-a700",ge),height:18,width:18}),ye=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",className:l()("text-primary-a700",fe),"aria-label":"Current step"},r.createElement("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#002DE4","stroke-width":"4"})),Se=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",className:l()("text-neutral-400",Ee),"aria-label":"Future step"},r.createElement("circle",{cx:"4",cy:"4",r:"4",fill:"#DDE0E3"}));var Ne=n(5889),Ce=n(9114),Te=n.n(Ce);const Ie="default";function Oe(e=Ie){return window.CHAnalytics.v(e)}const xe=e=>{Oe().interaction(e)},Re=(e,t,n)=>{return r={interactionLocation:"aet_workflow",interactionTarget:"none",action:e,actionTargetType:t,actionTargetId:n||"none"},xe({interactionType:"click",...r});var r},Ae=e=>{return t={interactionLocation:"aet_workflow",actionTargetType:"workflow_step",actionTargetId:e},xe({interactionType:"viewed",interactionTarget:"none",action:"view",...t});var t};var Le=n(3956);const ke=({destinationURL:e,...t})=>{(0,Le.trackCustomEvent)("CTA Clicked",t)};let _e;!function(e){e.POPULAR="Popular",e.MANUAL="Manual",e.TREE="Tree",e.SUGGESTED="Suggested"}(_e||(_e={}));function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pe.apply(this,arguments)}const De="Discard",Fe="Cancel",Ue=({handleDiscard:e,handleCancel:t,returnFocus:n,...o})=>r.createElement(Te(),{role:"alertdialog","aria-modal":"true","aria-labelledby":"dialog-label","aria-describedby":"dialog-desc",focusTrapOptions:{initialFocus:!1},tabIndex:-1},r.createElement(v.x,Pe({className:"p-4 card"},o),r.createElement("div",{className:"caption",id:"dialog-label"},"Discard this question?"),r.createElement("div",{className:"body-1 mt-1",id:"dialog-desc"},"Your question draft will not be saved"),r.createElement("div",{className:"d-flex mt-3"},r.createElement(Ne.z,{variant:"secondary",size:"sm",onClick:()=>{e(),Re("click","workflow","delete_and_close"),ke({actionType:Le.ActionType.LINK,text:De,intent:"Discard question and close AET Modal"})},className:"mr-1"},De),r.createElement(Ne.z,{variant:"tertiary",size:"sm",onClick:()=>{t(),Re("click","workflow","cancel_close"),ke({actionType:Le.ActionType.LINK,text:Fe,intent:"Cancel discard question"})}},Fe)))),Me={get:function(e,t){const n={method:"GET",...t};return fetch(e,n).then(je)},post:function(e,t,n){const r={method:"POST",Accept:"application/json",headers:{"Content-Type":"application/json"},body:t,...n};return fetch(e,r).then(je)},put:function(e,t,n){const r={method:"PUT",headers:{"Content-Type":"application/json"},body:t,...n};return fetch(e,r).then(je)},delete:function(e,t){const n={method:"DELETE",...t};return fetch(e,n).then(je)}};const je=async e=>{if(e.ok)return 204===e.status?Promise.resolve(null):e.json();{var t;const n=await e.json();return Promise.reject((null==(t=n.error)?void 0:t.length)>0?n.error[0]:n)}},qe=async({queryKey:e})=>{const[,t]=e;return Me.get(`/api/v1/aet-workflow-info/?actionType=${t}`)},Ge=async e=>Me.post("/api/v1/forgotPassword/",JSON.stringify({email:e}),{referrer:"no-referrer",mode:"cors",cache:"no-cache",credentials:"same-origin"}),$e=async({user:e,captchaToken:t})=>{var n;const r=encodeURIComponent(e.email),o=encodeURIComponent(e.password),a=encodeURIComponent(t);let s="";return s=null!=(n=window.enterpriseCaptchaEnabled)&&n?`email=${r}&password=${o}&captchaToken=${a}&submit=true`:`email=${r}&password=${o}&recaptcha_response=${a}&submit=true`,e.rememberLogin&&(s+="&remember_me=1"),Me.post("/ajax/login.php",s,{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},referrer:"no-referrer",mode:"cors",cache:"no-cache",credentials:"same-origin"})},Qe=async e=>Me.post("/api/v1/users/",JSON.stringify(e),{credentials:"same-origin"}),Be=(e="")=>(0,i.useQuery)(["user",e],qe,{select:e=>({...e,userId:parseInt(e.userId)})});let We,Ve;!function(e){e.LOGGED_OUT="Logged out",e.BASIC="Basic",e.PREMIER="Premier"}(We||(We={})),function(e){e[e.QUESTION_ENTRY=0]="QUESTION_ENTRY",e[e.COURSE_SELECTION=1]="COURSE_SELECTION"}(Ve||(Ve={}));const He="form-control-FouLY",ze="form-group-QoTnP",Ye="course-selector-XLd50",Ke="override-granite-hc2SF",Je="no-school-Q74En",Ze="empty-course-description-X55cA",Xe="add-course-button-kz3y4";var et=n(5469);const tt=e=>{var t,n,o,a,s,i;const{schoolId:c,course:u,setCourse:d,controlledCourseCreation:m,controlledCourseSelectorMode:p,overrideGranite:h,placeholder:g,customStyling:f,onNoCourseResults:E,onNoDepartmentResults:v}=e,[b,w]=r.useState(Ct.SELECT_COURSE),[y,S]=r.useState(null),[N,C]=r.useState(""),[T,I]=r.useState("");r.useEffect((()=>{null!=u&&u.text||I("")}),[null==u?void 0:u.text]);const O=null!=(t=null==p?void 0:p.courseSelectorMode)?t:b,x=null!=(n=null==p?void 0:p.setCourseSelectorMode)?n:w;let R=r.useRef(null);null!=p&&p.courseNameRef&&(R=p.courseNameRef);const A=r.createElement(et.hP,{key:"Add new course",index:99,item:{text:"+ Add new course",value:-99}},r.createElement(Ne.z,{variant:"secondary",size:"sm",className:Xe},"+ Add new course")),L=r.createElement("div",{className:Ze},"We can't find your course. Add it as a new course."),k=null!=(o=null==m?void 0:m.createdCourseNumber)?o:N,_=null!=(a=null==m?void 0:m.setCreatedCourseNumber)?a:C,P=null!=(s=null==m?void 0:m.createdCourseDepartment)?s:y,D=null!=(i=null==m?void 0:m.setCreatedCourseDepartment)?i:S;let F=r.useRef(null);null!=m&&m.deptAcroRef&&(F=m.deptAcroRef);let U=r.useRef(null);return null!=m&&m.courseNumRef&&(U=m.courseNumRef),r.createElement("div",{className:l()({[`${Ye}`]:!0,[`${Ke}`]:h})},null===c&&r.createElement("div",{className:ze},r.createElement("label",null,"Course code"),r.createElement("input",{className:`${He} ${Je}`,disabled:!0,placeholder:g})),null!==c&&O===Ct.SELECT_COURSE&&r.createElement("div",null,r.createElement("label",null,"Course code"),r.createElement(lt,{onChange:e=>{-99!==(null==e?void 0:e.value)?d(e):x(Ct.ADD_COURSE)},schoolId:c,itemsBelowList:A,selectedCourse:u,inputValue:T,setInputValue:I,placeholder:g,noResultsPlaceholder:L,overrideGranite:h,inputRef:R,onNoResults:E})),null!==c&&O===Ct.ADD_COURSE&&r.createElement(bt,{courseNumber:k,setCourseNumber:_,setDepartment:D,department:P,handleClickExit:()=>{x(Ct.SELECT_COURSE)},schoolId:c,setCourse:e=>{var t;d(e),I(null!=(t=null==e?void 0:e.text)?t:"")},hideCreateCourseButton:!!m,overrideGranite:h,deptAcroRef:F,courseNumRef:U,onNoDepartmentResults:v,customStyling:f}))},nt=10,rt=e=>{var t,n,o,a,s,l,i;const[c,u]=r.useState(""),[d,m]=r.useState([]),[p,h]=r.useState(!1),{onChange:g,fetchLimit:f=nt,onNoResults:E,noResultsPlaceholder:v,schoolId:b}=e;r.useEffect((()=>{var t,n;const r=null!=(t=e.inputValue)?t:c;if(!r)return;const o=null!=(n=e.processDepartment)?n:e=>({text:e.deptAcro,value:e.deptId});let a=!0;return h(!0),fetch(((e,t)=>`/api/v1/schools/${e}/departments/?q=${t}`)(b,r)).then((e=>e.json())).then((e=>{if(a){h(!1);let t=[];if(Array.isArray(e)){const n=e.find((({deptAcro:e})=>e===r)),a=e.filter((({deptId:e})=>-1!==e&&e!==(null==n?void 0:n.deptId))).map(o).sort(((e,t)=>{let n=0;if(null!==e&&null!==t){const r=e.text.toUpperCase(),o=t.text.toUpperCase();r>o?n=1:r<o&&(n=-1)}return n}));n&&t.push(o(n)),t.push(...a)}m(t)}})),()=>{a=!1}}),[c,f,e.processDepartment,e.inputValue,b]);const w=r.useRef([]);r.useEffect((()=>{w.current=d}));const y=w.current;r.useEffect((()=>{d.length!==(null==y?void 0:y.length)&&0===d.length&&(null==E||E())}),[d,y,E]);const S=null!=(t=null==e?void 0:e.inputValue)?t:c,N=null!=(n=null==e?void 0:e.setInputValue)?n:u,C=null!=(o=e.className)?o:"",T=null!=(a=e.inputCustomClass)?a:"",I=null!=(s=e.placeholder)?s:"Choose a Department",O=null!=(l=e.selectedDepartment)?l:null;let x=r.useRef(null);void 0!==e.inputRef&&(x=e.inputRef);const R=null!=(i=e.renderItemCustom)?i:(e,t)=>r.createElement(et.hP,{key:`Department: ${t}`,index:t,item:e});return r.createElement(et.Lt,{className:C,screenReaderLabel:"Choose a Department",inputValue:S,onInputValueChange:N,onSelect:e=>{g(e)},selectedItem:O},r.createElement(et.fr,{placeholder:I,className:T,ref:x}),!p&&r.createElement(et.h_,null,d.map(R),0===d.length&&v))},ot="course-dropdown-T7IfI",at="override-granite-j1hGI",st=10,lt=e=>{var t,n,o,a,s,i;const[c,u]=r.useState(""),[d,m]=r.useState([]),[p,h]=r.useState(!1),{schoolId:g,onChange:f,itemsBelowList:E,fetchLimit:v=st,selectedCourse:b,overrideGranite:w,noResultsPlaceholder:y,onNoResults:S}=e;r.useEffect((()=>{var t,n;const r=null!=(t=e.inputValue)?t:c;if(!r||!g)return;const o=null!=(n=e.processCourse)?n:Nt;let a=!0;return h(!0),fetch(`/api/v1/schools/${g}/courses/?isVerifiedSchool=0&limit=${v}&q=${r}`).then((e=>e.json())).then((e=>{if(a){h(!1);let t=[];if(Array.isArray(e)){const n=e.filter((e=>e.dept_acro&&e.course_num)).map(o);t.push(...n)}m(t)}})),()=>{a=!1}}),[c,v,g,e.processCourse,e.inputValue]);const N=r.useRef([]);r.useEffect((()=>{N.current=d}));const C=N.current;r.useEffect((()=>{d.length!==(null==C?void 0:C.length)&&0===d.length&&(null==S||S())}),[d,C,S]);const T=null!=(t=null==e?void 0:e.inputValue)?t:c,I=null!=(n=null==e?void 0:e.setInputValue)?n:u,O=null!=(o=e.className)?o:"",x=null!=(a=e.inputCustomClass)?a:"",R=null!=(s=e.placeholder)?s:"Enter course name",A=!!T;let L=r.useRef(null);void 0!==e.inputRef&&(L=e.inputRef);const k=null!=(i=e.renderItemCustom)?i:(e,t)=>r.createElement(et.hP,{key:`Searched Course: ${t}`,index:t,item:e});return r.createElement(et.Lt,{className:l()(ot,O,{[`${at}`]:w}),screenReaderLabel:"Search for a course",inputValue:T,onInputValueChange:I,onSelect:e=>{f(null!=e?e:null)},selectedItem:null!=b?b:null},r.createElement(et.fr,{placeholder:R,className:x,ref:L}),!p&&A&&r.createElement(et.h_,null,d.map(k),0===d.length&&y,E))},it="form-control-WuiW4",ct="course-creator-azGmX",ut="course-creator-fields-GyG3u",dt="form-section-cwYBv",mt="override-granite-cqSi7",pt="course-creator-action-KBF1o",ht="search-again-UwChN",gt="search-again-button-W6Y14",ft="empty-course-description-DuXcP",Et="aaq-mobile-OiCrm",vt="blo-styling-I9Cnl",bt=e=>{const{department:t,setDepartment:n,courseNumber:o,setCourseNumber:a,handleClickExit:s,schoolId:i,setCourse:c,hideCreateCourseButton:u,overrideGranite:d,deptAcroRef:m,courseNumRef:p,onNoDepartmentResults:h,customStyling:g,hideSearchAgainButton:f=!1,cancelButtonAction:E,createButtonText:v="Create",departmentLabel:b=r.createElement(r.Fragment,null,"Department"),courseNumberLabel:w=r.createElement(r.Fragment,null,"Course number"),departmentHint:y=null}=e,[S,N]=r.useState(!1),C=()=>{n(null),a("")},T=r.createElement("div",{className:ft},"Department not found");return r.createElement("div",{className:l()(ct,{[`${mt}`]:d,[`${Et}`]:"aaq-mobile"===g,[`${vt}`]:"blo"===g})},r.createElement("div",{className:ut},r.createElement("div",{className:dt},r.createElement("label",null,b),r.createElement(rt,{onChange:e=>{n(e)},selectedDepartment:t,placeholder:"e.g. BIO",className:"",inputCustomClass:"",inputRef:m,onNoResults:h,noResultsPlaceholder:T,schoolId:i})),y&&r.createElement("div",{className:dt},y),r.createElement("div",{className:dt},r.createElement("label",null,w),r.createElement("div",null,r.createElement("input",{className:it,type:"text",value:o,placeholder:"e.g. 123, 123A",onChange:e=>{const t=e.target.value;(t.match(/^[0-9a-zA-Z]+$/)||""===t)&&a(t)},ref:p})))),r.createElement("div",{className:l()(pt,{[`${ht}`]:s})},!u&&r.createElement(Ne.z,{variant:"secondary",disabled:S||!o||!t,onClick:()=>{var e;N(!0),wt({departmentAcronym:null!=(e=null==t?void 0:t.text)?e:"",schoolId:i,courseNum:o}).then((e=>(e.ok&&C(),N(!1),e.json()))).then((({course:e})=>{null==c||c(Nt(e)),null==s||s()}))}},v),s&&!f&&r.createElement(Ne.z,{variant:"tertiary",size:"sm",icon:"search",className:gt,onClick:()=>{C(),null==c||c(null),null==s||s()}},"Search courses again"),E&&r.createElement(Ne.z,{variant:"link",size:"sm",onClick:E},"Cancel")))},wt=e=>fetch("/api/v1/courses/",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});var yt=n(3955),St=n(3312);const Nt=e=>{return{text:0===e.course_name.length?`${e.dept_acro} ${e.course_num}`:`${e.dept_acro} ${e.course_num}: ${e.course_name}`,value:(t=e,(0,yt.Z)(t,((e,t)=>(0,St.Z)(t))))};var t};let Ct;!function(e){e.SELECT_COURSE="Select course",e.ADD_COURSE="Add course"}(Ct||(Ct={}));const Tt=["Ask one question at a time","Include all relevant information","Use an image to ask a question that is difficult to type"];let It;!function(e){e.CKEDITOR="ckeditor"}(It||(It={}));const Ot=r.createContext(null),xt=r.createContext(null),Rt=()=>{const e=r.useContext(Ot);if(null===e)throw new Error("useAAQFormContextState was used outside of its Provider");return e},At=()=>{const e=r.useContext(xt);if(null===e)throw new Error("useAAQFormContextUpdater was used outside of its Provider");return e},Lt=()=>{const e=r.useContext(Ot),t=r.useContext(xt);if(null===t||null===e)throw new Error("useAAQFormContext was used outside of its Provider");return{...e,...t}},kt=({children:e,defaultQuestionText:t})=>{const{data:n}=Be(),[o,a]=r.useState(null),[s,l]=r.useState(null),[i,c]=r.useState(null),[u,d]=r.useState(null),[m,p]=r.useState(null),[h,g]=r.useState(!1),[f,E]=r.useState(Ct.SELECT_COURSE),[v,b]=r.useState(null),[w,y]=r.useState(""),[S,N]=r.useState(Ve.QUESTION_ENTRY);r.useEffect((()=>{n&&d({schoolId:n.schoolId,schoolName:n.schoolName,schoolLabel:n.schoolName})}),[n]),r.useEffect((()=>{if(t){const e=document.createElement("div");e.textContent=t;const n=e.innerHTML;a({format:It.CKEDITOR,attachments:[],plainTextContent:n,questionText:n,uploadInProgress:!1})}}),[t]);const C=r.useMemo((()=>{var e;const t=[];null!=o&&o.uploadInProgress&&t.push("Attachments are being uploaded. Please wait until they are finished and try again.");const n=null!=(e=null==o?void 0:o.plainTextContent.length)?e:0;if((o?o.attachments.reduce(((e,{ocrTextLength:t=0})=>e+t),n):0)<10)t.push("The question you've provided is too short. A minimum of 10 characters is required.");else{var r;(null!=(r=null==o?void 0:o.questionText.length)?r:0)>1e5&&t.push("The question you've provided is too long. Please simplify it, so that tutors can clearly understand how to provide the most helpful explanation.")}return t.length?t:null}),[o]);return r.createElement(Ot.Provider,{value:{question:o,validationErrors:C,subject:s,course:i,school:u,suggestedSubjectsLogId:m,skippedSuggestedSubjects:h,courseSelectorMode:f,createdCourseDepartment:v,createdCourseNumber:w,activeStep:S,isDirty:null!==o&&""!==(null==o?void 0:o.questionText)}},r.createElement(xt.Provider,{value:{setQuestion:a,setSubject:l,setCourse:c,setSchool:d,setSuggestedSubjectsLogId:p,setSkippedSuggestedSubjects:g,setCourseSelectorMode:E,setCreatedCourseDepartment:b,setCreatedCourseNumber:y,setActiveStep:N,reset:()=>{a(null),l(null),c(null),d(null),p(null),g(!1),E(Ct.SELECT_COURSE),b(null),y(""),N(Ve.QUESTION_ENTRY)}}},e))},_t=r.createContext(null),Pt=r.createContext(null),Dt=()=>{const e=r.useContext(Pt);if(null===e)throw new Error("useStudentQuestionSubmittedContextUpdater was used outside of its Provider");return e},Ft=({questionEntryPoint:e,abTestRunning:t=!1,children:n})=>{var o,a;const[s,l]=r.useState(_e.TREE),[i,c]=r.useState(0),[u,d]=r.useState(0),[m,p]=r.useState(0),[h,g]=r.useState(0),[f,E]=r.useState(0),[v,b]=r.useState(0),[w,y]=r.useState(0),{data:S}=Be(),{course:N}=Lt(),C=null!=(o=null==N?void 0:N.mode)?o:Ct.SELECT_COURSE,T={questionEntryPoint:e,userState:null!=(a=null==S?void 0:S.userState)?a:We.LOGGED_OUT,subjectSelectionType:s,selectedSubjectCount:i,selectedSubjectCategoryCount:u,selectedSchoolCount:m,noMatchedDept:h,selectedDeptCount:f,noMatchedCourse:v,selectedCourseCount:w,courseSelectionMode:C},I={},O={setSubjectSelectionType:l,incrementSelectedSubjectCount:()=>c(i+1),incrementSelectedSubjectCategoryCount:()=>d(u+1),incrementSelectedSchoolCount:()=>p(m+1),incrementNoMatchedDept:()=>g(h+1),incrementSelectedDeptCount:()=>E(f+1),incrementNoMatchedCourse:()=>b(v+1),incrementSelectedCourseCount:()=>y(w+1),reset:()=>{l(_e.TREE),c(0),d(0),p(0),g(0),E(0),b(0),y(0)}};return r.createElement(_t.Provider,{value:{...T,...I}},r.createElement(Pt.Provider,{value:{...O}},n))};let Ut;!function(e){e[e.AAQFORM=0]="AAQFORM",e[e.ACCOUNT_LOGIN=1]="ACCOUNT_LOGIN",e[e.START_QUESTION_WORKFLOW=2]="START_QUESTION_WORKFLOW",e[e.REDIRECT_TO_WAIT_PAGE=3]="REDIRECT_TO_WAIT_PAGE"}(Ut||(Ut={}));const Mt=()=>{const{data:e}=Be(),{questionId:t,redirectPath:n}=p();return t?!t||null!=e&&e.userId?t&&null!=e&&e.userId&&!n?Ut.START_QUESTION_WORKFLOW:Ut.REDIRECT_TO_WAIT_PAGE:Ut.ACCOUNT_LOGIN:Ut.AAQFORM},jt=({closeModal:e})=>{const{isMobile:t,isTablet:n,isDesktop:o}=ne(),{overrideGranite:a,reset:s}=g(),{reset:i}=Dt(),{isDirty:c,reset:u}=Lt(),[d,m]=r.useState(!1),[p,h]=(()=>{const e=(0,r.useRef)(null);return[e,()=>{var t;null==(t=e.current)||t.focus()}]})(),f=(0,L.M)(),E=Mt();return r.createElement(r.Fragment,null,r.createElement("div",{className:l()("border-bottom border-neutral-400","d-flex flex-column flex-lg-row align-items-sm-center",{"flex-grow-0":!t},de),"data-testid":"AAQ_MODAL_TEST_ID"},r.createElement("div",null,r.createElement("h2",{className:l()({"h4 mb-1":o,h5:n,h6:t})},"Get homework help"),o&&r.createElement("ul",{className:l()("list-unstyled m-0",me)},r.createElement("li",{className:pe},r.createElement(we,null),"Get connected with a verified expert tutor 24/7"),r.createElement("li",{className:pe},r.createElement(we,null),r.createElement("span",{className:"mr-1"},"Receive answer and explanation in as few as 30 minutes")," ",r.createElement("a",{target:"_blank",href:"/tutors/homework-help/#how-it-works-heading"},"Learn more")))),!t&&r.createElement("div",{className:l()("mt-md-1 mt-lg-0 ml-lg-3","flex-fill align-self-stretch","d-flex justify-content-center align-items-center")},r.createElement(W,{currentStepIdx:0,overrideGranite:a,className:he},r.createElement(V,{className:"p-0 m-0"},r.createElement(H,null,r.createElement(z,{stepActiveIcon:ye}),r.createElement(X,null,"Ask a question")),r.createElement(H,null,r.createElement(z,{stepDefaultIcon:Se}),r.createElement(X,null,"Connect with",r.createElement("br",null),"an expert")),r.createElement(H,null,r.createElement(z,{stepDefaultIcon:Se}),r.createElement(X,null,"Tutor works on",r.createElement("br",null),"your question")),r.createElement(H,null,r.createElement(z,{stepDefaultIcon:Se}),r.createElement(X,null,"Receive your ",r.createElement("br",null),"solution")))))),d?r.createElement(r.Fragment,null,r.createElement("div",{className:ue}),r.createElement(Ue,{className:l()(le,ce,"p-3 p-lg-4 bg-white",o&&"shadow"),handleDiscard:()=>{m(!1),e(),u(),i(),s()},handleCancel:()=>{m(!1)},"aria-labelledby":`close-modal-btn-${f}`,returnFocus:h})):r.createElement("button",{className:l()("btn btn-icon-borderless",le),onClick:()=>{!c||E!==Ut.AAQFORM&&E!==Ut.ACCOUNT_LOGIN?e():m(!0)},"aria-label":"Close modal",id:`close-modal-btn-${f}`,ref:p},r.createElement(k.Z,{height:26})))},qt=({isModalOpen:e,closeModal:t,children:n})=>{const[o,a]=r.useState(!1),[s,i]=r.useState(!1),c=r.useRef(null),{overrideGranite:u,isModalAnimatingIn:d,setIsModalAnimatingIn:m}=g();A({to:c,id:"AAQ_WIDGET_TO_MODAL",doTransform:e&&o,transitionTime:220,setToVisible:i,toBorderRadius:"3px",setIsToTransformingIn:m});return r.createElement(w,{isOpen:e,showX:!1,closeModal:t,closeOnClickOutside:!1,portalClassName:l()(ae,{[ie]:u,[se]:s}),overlayClassName:l()(ve,{[se]:s}),onAfterOpen:()=>{a(!0)},onAfterClose:()=>{a(!1)},closeTimeoutMS:220,ref:c},r.createElement(C,{disabled:!u,className:l()({[be]:u})},r.createElement(jt,{closeModal:t}),n))};var Gt=n(6446);const $t=function({delay:e=500,margin:t,className:n="",variant:o="lg"}){const[a,s]=r.useState(!1);return r.useEffect((()=>{let t=!0;return window.setTimeout((()=>{t&&s(!0)}),e),()=>{t=!1}}),[e]),r.createElement(Gt.$,{margin:t,className:l()([n,""+(a?"visible":"invisible")]),variant:o})};var Qt=n(4887),Bt=n(861);n(6650);var Wt=n(9411),Vt=n(2717);const Ht="FileRepository",zt="ImageUploadEditing",Yt="ImageTranscription",Kt=["bold","italic","underline","|","subscript","superscript","|","numberedList","bulletedList","|","imageUpload","insertTable","EqnEditor","codeBlock"],Jt=["ImageResize","ImageResizeEditing","ImageResizeHandles","ImageToolbar"],Zt=e=>{if(e.plugins.has(Ht)){const t=e.plugins.get(Ht);for(let e of t.loaders)if("reading"===e.status||"uploading"===e.status)return!0}return!1},Xt=(e,t)=>{const n="start"===t?"before":t;e.model.change((t=>{t.setSelection(t.createPositionAt(e.model.document.getRoot(),n))}))},en=e=>!!e&&"rootName"in e,tn={container:"container-YkxsP",overrideGranite:"override-granite-QTtLG",containerWithBar:"container--with-bar-p4y25",translateShiftX:"translate-shift-x-E0cv9",errorMsg:"error-msg-OgY6f",uploadBar:"upload-bar-_05WB",uploadBarIcon:"upload-bar-icon-vSLxu",uploadBarHint:"upload-bar-hint-ppdmf",uploadBarButton:"upload-bar-button-Spts4",panel:"panel-OyaRf"};function nn({initialContent:e,initialFiles:t,placeholder:n,id:o,uploadUrl:a,removePlugins:s=Jt,toolbarItems:i,onChange:c,allowedImageMimeTypes:u,autoFocus:d=!1,showUploadBar:m=!1,overrideGranite:p=!1,viewportTopOffset:h}){const[g,f]=r.useState(!1),E=r.useRef((e=>{if(!e)return{};const t={};return e.forEach((e=>{t[e.urls.default]=e})),t})(t)),[v,b]=r.useState(null);let w=i;void 0!==w&&0!==w.length||(w=[...Kt]);const y={placeholder:n,removePlugins:s,toolbar:{viewportTopOffset:h,items:w},language:"en",image:{upload:{types:u},insert:{type:"block"}},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},eqnEditorConfig:{design:"urc,col,fn,i|sty|spa|bin|sym|for|sub|acc|ace|arr|ope|bra|gel|geu|rel|mat"},simpleUpload:{uploadUrl:a},imageTranscription:{exportAs:"figure",exportAttributes:e=>{var t;const n=E.current[null!=(t=null==e?void 0:e.getAttribute("src"))?t:""];return{"data-source":null==n?void 0:n.attachmentId}},imageToolbar:{title:"We have detected text content"},textToolbar:{title:"Text content from the image"}}};return r.useEffect((()=>{v&&d&&(Xt(v,"end"),v.editing.view.focus())}),[d,v]),r.createElement("div",{className:l()(tn.container,{[tn.containerWithBar]:m,[tn.overrideGranite]:p}),"data-testid":o},g?r.createElement("p",{className:tn.errorMsg},"The editor has crashed. Try reloading the page."):r.createElement(r.Fragment,null,r.createElement(Vt,{key:o,id:o,editor:window.ChEditorTm,config:y,onInit:function(t){window.CH_EDITORS=window.CH_EDITORS||{},window.CH_EDITORS[o]=t,t.setData(e),(e=>{var t;if(null==(t=e.commands.get("imageUpload"))||t.on("execute",(()=>{ke({actionType:Le.ActionType.SECONDARY,text:"Upload image",intent:"Upload image"})})),e.plugins.has(Yt)){const t=e.plugins.get(Yt);t.on("applyTranscription",((e,{preferTranscription:t})=>{Le.trackElementFocused({containerType:Le.ContainerType.FORM,text:"Apply image OCR",intent:t?"prefer text over image":"prefer image over text"})})),t.on("toggleTranscription",((e,{preferTranscription:t})=>{ke({actionType:Le.ActionType.SECONDARY,text:"Toggle image OCR",intent:t?"prefer text over image":"prefer image over text"}),null==window.attemptSessionRecording||window.attemptSessionRecording("aaq-image-ocr")}))}})(t),((e,t)=>{e.plugins.has(zt)&&e.plugins.get(zt).on("uploadComplete",((e,{data:n})=>{const r=n.urls.default;r&&(t[r]=n)}))})(t,E.current),(e=>{e.model.document.registerPostFixer((t=>{const n=e.model.document.differ.getChanges();for(const t of n){var r;if("insert"!==t.type)continue;const{name:n,position:o}=t;if("imageBlock"===n&&en(o.parent)&&null==(null==(r=o.nodeAfter)?void 0:r.nextSibling)){const t=e.model.createPositionAt(e.model.document.getRoot(),"end");e.commands.execute("insertParagraph",{position:t})}}}))})(t),((e,t)=>{if(!e.plugins.has(zt)||!e.plugins.has(Yt))return;e.plugins.get(zt).on("uploadComplete",((n,{imageElement:r,data:o})=>{const a=t(o);a&&e.commands.execute("applyImageTranscription",{imageElement:r,content:a,shouldFocus:!0,preferTranscription:!0===o.ocrTextAutoConvert})}))})(t,(e=>null!=e&&e.ocrText?"<p>"+e.ocrText+"</p>":null)),d&&(Xt(t,"end"),t.editing.view.focus()),b(t)},onChange:function(e,t){if(!c)return;const n=t.getData(),r=(e=>{var t,n;const r=document.createElement("div");return r.innerHTML=e,null!=(t=null==(n=r.textContent)?void 0:n.trim())?t:""})(n),o=document.createElement("div");o.innerHTML=n;const a=(0,Wt.Z)(o.querySelectorAll("img"),(e=>{var t;return E.current[null!=(t=e.getAttribute("src"))?t:""]})).filter((e=>e));c({formattedText:n,plainText:r,filesLoading:Zt(t),files:a})},onError:function(e){console.error(e),f(!0)}}),m&&v&&r.createElement(rn,{editor:v})))}function rn({editor:e}){const t=r.useRef(null);return r.useEffect((()=>{if(!t.current)return;const n=e.ui.componentFactory.create("imageUpload");n.buttonView.set({class:l()(tn.uploadBarButton,"btn btn-link"),label:"Upload",icon:void 0,tooltip:!1,withText:!0}),n.render(),t.current.appendChild(n.element)}),[e,t]),r.createElement("div",{className:l()(tn.uploadBar,"d-flex d-flex-row align-items-baseline align-items-md-center"),style:{backgroundImage:"linear-gradient(to top, rgba(255,255,255,1) 75%, rgba(255,255,255,0))"}},r.createElement("i",{className:l()(tn.uploadBarIcon,"chi-image")}),r.createElement("p",{className:l()(tn.uploadBarHint)},"Drag and drop images or"),r.createElement("div",{ref:t}))}const on=r.createContext(void 0),an=on.Provider,sn=["png","gif","jpeg","bmp","x-icon","svg+xml"],ln=({question:e,onChange:t,shouldFocusEditor:n=!1})=>{var o;const{overrideGranite:a}=p(),s=(()=>{const e=r.useContext(on);if(void 0===e)throw new Error("useRootRef must be used within a RootRefProvider.");return e})(),l=r.useRef(0),[i,c]=r.useState(!1);return r.useEffect((()=>{if(c(!0),s.current){const{top:e}=s.current.getBoundingClientRect();l.current=e}}),[s,l]),i?r.createElement(nn,{initialContent:null!=(o=null==e?void 0:e.questionText)?o:"",onChange:({formattedText:e,plainText:n,files:r,filesLoading:o})=>{t({format:It.CKEDITOR,questionText:e,plainTextContent:n,attachments:r,uploadInProgress:o})},placeholder:"Type your question or attach a picture here.",id:"ckeditor-question-field",autoFocus:n,showUploadBar:!0,uploadUrl:"/api/v2/attachments/?includeOcrText=true",allowedImageMimeTypes:sn,overrideGranite:a,viewportTopOffset:l.current}):null},cn=async e=>Me.post(`/api/v1/questions/${e}/start-question-workflow/`,void 0,{credentials:"same-origin"}),un=async()=>Me.get(`/api/v2/users/available-user-questions/?time=${(new Date).getTime()}`),dn=(e,t,n)=>{const r=[];return r.push(e),t&&r.push("free"),1===e?r.push("question"):r.push("questions"),n&&(1===e?r.push("expires"):r.push("expire")),r.join(" ")},mn=e=>{const t=(new Date).getTime()+e;return new Date(t).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})},pn=e=>e<=1?"today":e<=7?"this week":e<=30?"this month":`in ${e} days`,hn="question-credit-balance-jLvLA",gn="gift-qrKDC",fn="qna-BfrpZ",En="wallet-ZD7N6",vn="override-granite-STTwF";function bn(){return bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bn.apply(this,arguments)}const wn=({userState:e,isROWUser:t,overrideGranite:n=!1,className:o,...a})=>{const{data:s}=((e={})=>(0,i.useQuery)("availableUserQuestions",un,e))({enabled:e!==We.LOGGED_OUT}),c=((e,t,n)=>{if(e===We.LOGGED_OUT)return t?[]:["First 5 questions on us","Gift"];if(n){const{hasBonusQuestions:t,bonusQuestions:r,hasTutorQuestions:o,tutorQuestions:a}=n;if(t)return"three_hour_daily_bonus"===r.rewardType?[`${dn(r.earliestExpiringQuestionsCount,!0,!0)} at ${mn(r.timeRemaining)}`,"Gift"]:[`${dn(r.earliestExpiringQuestionsCount,!0,!0)} today`,"Gift"];if(o&&a.daysUntilExpiration<=30)return[`${dn(a.expiringQuestions,e===We.BASIC,!0)} ${pn(a.daysUntilExpiration)}`,e===We.BASIC?"Gift":"QNA"];if(o&&a.daysUntilExpiration>30)return[`${dn(a.expiringQuestions,e===We.BASIC,!1)} available`,e===We.BASIC?"Gift":"QNA"]}return[]})(e,t,s);if(c.length<2)return null;const u=c[0],d=c[1].toLowerCase();return r.createElement(v.x,bn({as:"div",className:l()(hn,{[gn]:"gift"===d,[fn]:"qna"===d,[En]:"wallet"===d,[vn]:n},o)},a),u)};var yn=n(1814);const Sn="edit-No6AD",Nn=({title:e,isStepOptional:t=!1,idleContent:n,status:o,stepId:a,children:s=null})=>{const i=te(),{setActiveStep:c}=At();return r.createElement(v.x,{className:l()("d-flex align-items-start align-items-sm-center",{"mb-1":"active"===o})},r.createElement("div",{className:"row flex-fill",style:{minWidth:"50%"}},r.createElement("div",{className:l()({"sr-only":"completed"===o&&i,"col-sm-6 col-md-5 col-lg-4 col-xl-3":"completed"===o,"col-12":"completed"!==o})},r.createElement("div",{className:"d-flex flex-column flex-sm-row align-items-sm-baseline"},r.createElement("span",{className:l()({"text-neutral-900":"upcoming"!==o,"text-neutral-500":"upcoming"===o})},r.createElement("span",{className:l()("font-weight-bold",{"body-1":i,h6:!i})},e),t&&r.createElement("span",{className:l()("font-weight-light body-1",{"text-neutral-600":"upcoming"!==o})}," ","(optional)")),s)),"completed"===o&&r.createElement("div",{className:l()("col-12 col-sm-6 col-md-7 col-lg-8 col-xl-9","font-weight-normal",i?"body-1":"h6")},n&&r.createElement("div",{className:"text-truncate"},n))),r.createElement("button",{className:l()("ml-3 ml-lg-5 btn btn-icon-borderless",{invisible:"completed"!==o}),"aria-label":"Edit Step",onClick:()=>c(a)},r.createElement(yn.Z,{className:Sn,height:16,width:16})))},Cn="step-wv8ZQ",Tn="override-granite-ncFnC",In=({overrideGranite:e=!1,children:t})=>r.createElement(On.Provider,{value:{overrideGranite:e}},r.createElement(Bt._5,{className:l()("m-0 shadow-none rounded-0 border-bottom border-neutral-400",Cn,{[Tn]:e})},t)),On=r.createContext(null),xn="pro-tips-header-hP0gI",Rn="pro-tips-list-item-i2Nsa";function An(){return An=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},An.apply(this,arguments)}const Ln=({delay:e,show:t})=>({overflow:"hidden",transform:t?"translateY(0)":"translateY(-50%)",opacity:t?1:0,transition:`transform 500ms ease-out ${e}ms, opacity 500ms ease-out ${e}ms`}),kn=({className:e,...t})=>{const[n,o]=r.useState(!1);return r.useEffect((()=>{const e=setTimeout((()=>o(!0)),1e3);return()=>clearTimeout(e)}),[]),r.createElement(v.x,An({as:"aside",className:l()("text-neutral-900",e)},t),r.createElement("h2",{className:"d-none d-md-block small font-weight-400 mb-2",style:Ln({delay:0,show:n})},r.createElement("span",{className:l()("d-inline-block border border-primary-a700 bg-primary-a700 text-neutral-100 font-weight-500",xn)},"Pro tips")," ","to get helped ASAP"),r.createElement("ul",{className:"body-2 font-weight-500 list-unstyled"},Tt.map(((e,t)=>r.createElement("li",{className:l()("p-2 mb-md-1",Rn),style:Ln({delay:200*(t+1),show:n}),key:`pro-tips-list-item-${t}`},e)))))},_n={behavior:"smooth",block:"start",inline:"nearest"},Pn={threshold:1},Dn=e=>{const t=(0,r.useRef)(null),n=((e,t={})=>{const[n,o]=r.useState(!1);return r.useEffect((()=>{var n;const r=new IntersectionObserver((([e])=>{o(e.isIntersecting)}),t),a=e instanceof Element?e:null!=(n=null==e?void 0:e.current)?n:null;return a&&r.observe(a),()=>{a&&r.unobserve(a)}}),[e,t]),n})(t,{...Pn,...e});return[t,e=>{var r;n||(null==(r=t.current)||r.scrollIntoView({..._n,...e}))}]},Fn="question-field-L3fPo",Un="visible-NaoO_",Mn=(e,t)=>e.length<=t?e:e.substring(0,t)+"…",jn="Next",qn=({question:e,truncateLength:t=150})=>{if(!e)return null;const n=e.plainTextContent.length>0,{length:o}=e.attachments;return o?r.createElement("div",{className:"d-flex align-items-baseline"},n&&r.createElement("p",{className:"text-truncate flex-fill mr-3 mr-lg-5"},Mn(e.plainTextContent,t)),r.createElement("p",{className:l()({"body-1":n})},r.createElement("i",{className:"chi-paperclip fa-paperclip"}),r.createElement("span",{className:"ml-1"},o," image"+(1===o?"":"s")))):r.createElement(r.Fragment,null,Mn(e.plainTextContent,t))},Gn=()=>{const{activeStep:e,question:t,validationErrors:n,setQuestion:o,setSubject:a}=Lt(),{setActiveStep:s}=At(),{isModalAnimatingIn:i,overrideGranite:c}=p(),{data:u}=Be(),[d,m]=r.useState(""),h=re(`(max-width: ${ee.MD}px)`),[g,f]=Dn(),E=e===Ve.QUESTION_ENTRY,v=Boolean(null==t?void 0:t.plainTextContent.length)||Boolean(null==t?void 0:t.attachments.length),b={name:"TBD",categoryId:1e9};r.useEffect((()=>{const e=(t="/tutors/homework-help/",window.location.pathname.includes(t));var t;const n=(r="questionText",new URLSearchParams(window.location.search).get(r));var r;const a=document.createElement("div");a.textContent=n;const s=a.innerHTML;e&&n&&o({format:It.CKEDITOR,attachments:[],plainTextContent:s,questionText:s,uploadInProgress:!1})}),[o]);const w=r.createElement("div",{className:l()("mt-md-3 mb-3 mb-md-5 continue-step")},r.createElement(Qt.f,{disabled:!v,onClick:async()=>{t&&(ke({actionType:Le.ActionType.PRIMARY,text:jn,intent:"Confirm question content"}),Re("next_step","question_entry","question_content_next"),null!=n&&n.length?(m(n[0]),f({block:"end"})):(m(""),a(b),s(Ve.COURSE_SELECTION)))},variant:"secondary","aria-label":"Next"},jn));return r.createElement(In,{overrideGranite:c},r.createElement(Nn,{title:`${Ve.QUESTION_ENTRY+1}. Ask your question`,idleContent:r.createElement(qn,{question:t}),stepId:Ve.QUESTION_ENTRY,status:E?"active":"completed"},E&&u&&r.createElement(wn,{userState:u.userState,isROWUser:u.isROWUser,overrideGranite:c,className:"mt-1 mt-sm-0 ml-sm-3"})),r.createElement(Bt.x1,{padding:{px:0,pb:0,pt:0,"pt-md":1}},r.createElement("div",{className:"container",style:{maxWidth:"initial"}},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-8 col-lg-9 px-0 pr-md-3"},!i&&r.createElement("div",{className:l()(Fn,{[Un]:!i})},r.createElement(ln,{question:t,onChange:o,shouldFocusEditor:!0})),r.createElement("p",{className:"body-1 text-alternative-danger-red my-1","aria-live":"assertive",role:"alert",ref:g},d),!h&&w),r.createElement(kn,{className:"col-md-4 col-lg-3 px-0 pl-md-3 mt-2 mt-md-0"}),h&&w))))},$n="school-dropdown",Qn="school-select-wrapper",Bn="school-dropdown-input",Wn="school-label",Vn="school-label-error",Hn="school-label-input",zn="school-label-open",Yn="no-results",Kn="no-results-show",Jn="no-results-error",Zn="loading",Xn="school-menu",er="school-menu-open",tr="school-item",nr="school-item-active",rr="school-item-selected";const or=function(e){return function(t,n){let r=t[n];var o,a,s,l,i;return t[n]=(o=r,a=e,function(){var e=l||this,t=arguments,n=s&&!i;window.clearTimeout(i),i=window.setTimeout((function(){i=void 0,s||o.apply(e,t)}),a),n&&o.apply(e,t)}),t}};var ar=n(3549);const sr=({len:e,isHidden:t,schoolErrorMessage:n,isLoading:o})=>{e>=2&&(t=!0);let a=1==e?"Please enter 1 or more character":"Please enter 2 or more characters";n&&(a=n,t=!1),o&&(a="Loading...",n=null);const s=[Yn];return t||s.push(Kn),n&&s.push(Jn),o&&s.push(Zn),r.createElement("div",{className:s.join(" ")},r.createElement("span",null,a))},lr="autocomplete-icon";let ir;!function(e){e.IS_LOADING="chi-loading fa-spinner",e.SHOW_PENCIL="chi-pencil-filled",e.NONE="d-none",e.INVISIBLE="chi-pencil-filled invisible"}(ir||(ir={}));const cr=e=>r.createElement("i",{"data-testid":"AUTO_COMPLETE_ICON_TEST_ID",className:l()(lr,e.autocompleteIconState,e.className)});function ur(){return ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ur.apply(this,arguments)}const dr=r.forwardRef(((e,t)=>{var n;return r.createElement("div",{style:{position:"relative"}},r.createElement("label",ur({},e.getLabelProps,{className:e.className}),!e.hideLabel&&r.createElement("span",null,"School:"),r.createElement("input",ur({className:`${Bn} ${e.inputCustomClass?e.inputCustomClass:""}`},e.getInputProps,{ref:t,type:"text",placeholder:e.placeholder,onFocus:e.onFocus,"aria-label":"School Input",disabled:e.hideSchool})),r.createElement(cr,{autocompleteIconState:e.isLoading?ir.IS_LOADING:e.hideSchool?ir.NONE:null!=(n=e.autocompleteIcon)?n:ir.INVISIBLE})))})),mr="emphasized-item",pr=({item:e,inputValue:t})=>{t=t||"";const n=e.toUpperCase().indexOf(t.toUpperCase());return-1===n?r.createElement("span",null,e):r.createElement(r.Fragment,null,r.createElement("span",null,e.substring(0,n)),r.createElement("span",{className:mr},e.substring(n,n+t.length)),r.createElement("span",null,e.substring(n+t.length)))};function hr(){return hr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hr.apply(this,arguments)}const gr=(e,t,n)=>{let r=[tr];return t.highlightedIndex===e&&r.push(nr),t.selectedItem===n.schoolName&&r.push(rr),r.join(" ")},fr=e=>e.isOpen?er:Xn,Er=r.forwardRef(((e,t)=>!e.isOpen||!e.inputValue||e.inputValue.length<2||0===e.items.length?r.createElement(r.Fragment,null):r.createElement("div",{style:{position:"relative"}},r.createElement("ul",{className:fr(e),ref:t},e.items.map(((t,n)=>r.createElement("li",hr({className:gr(n,e,t)},e.getItemProps({key:t.schoolId,index:n,item:t,disabled:0===t.schoolId})),r.createElement(pr,{item:t.schoolLabel,inputValue:e.inputValue}))))))));const vr=class{constructor(e={}){Object.assign(this,e)}};class br extends vr{constructor(e={}){super(e),this.schoolId=void 0,this.schoolName=void 0,this.schoolLabel=void 0,Object.assign(this,e)}}br.schema={schoolId:{type:"int"},schoolName:{type:"string"},schoolLabel:{type:"string"}};const wr=e=>e.country?`${e.schoolName} (${e.country})`:e.schoolName;var yr,Sr;function Nr(){return Nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nr.apply(this,arguments)}const Cr="School not found";let Tr=(yr=or(100),Sr=class extends r.Component{constructor(e){super(e),this.inputRef=r.createRef(),this.schoolLabelStyle=e=>{const t=[Hn];return t.push(this.props.schoolErrorMessage?Vn:Wn),this.props.labelCustomClass&&t.push(this.props.labelCustomClass),e&&t.push(zn),t.join(" ")},this.state={items:[],isLoading:!1},this.loadSchools=this.loadSchools.bind(this),this.onChange=this.onChange.bind(this),this.props.inputRef&&(this.inputRef=this.props.inputRef)}loadSchools(e){const{handleError:t}=this.props;var n;!e||!e.inputValue||e.inputValue.length<2||void 0!==e.selectedItem?t(null):(this.setState({isLoading:!0}),(n=e.inputValue,fetch(`/api/v1/schools/?q=${n}&limit=20&includeSchoolsWithNoDocuments=true`).then((e=>e.json())).then((e=>({options:e.map((e=>new br({schoolId:e.schoolId,schoolLabel:wr(e),schoolName:e.schoolName})))})))).then((e=>{const n=!!e.options.length,r=null==this.props.hideSchoolNotFound||!this.props.hideSchoolNotFound;t(n||r?null:"MISSING_SCHOOL_ERROR");const o=r&&!n?[{schoolId:0,schoolLabel:Cr,schoolName:Cr}]:e.options;this.setState({items:o,isLoading:!1})})).catch((e=>{t("FAIL_TO_LOAD_SCHOOLS_ERROR"),this.setState({isLoading:!1})})))}itemToString(e){return e?e.schoolName:""}onChange(e){e&&(e.schoolLabel=e.schoolName);const t=0===this.props.schoolId;this.props.onChange(e,t)}render(){return r.createElement("div",{className:l()($n,this.props.className),"data-testid":"school-dropdown"},r.createElement(ar.ZP,Nr({onChange:this.onChange,itemToString:this.itemToString,onStateChange:this.loadSchools,initialInputValue:this.props.currentSchoolName||""},this.props.enableKeyProp&&{key:this.props.currentSchoolName||void 0}),(({getLabelProps:e,getInputProps:t,getMenuProps:n,getItemProps:o,isOpen:a,selectedItem:s,inputValue:l,highlightedIndex:i})=>r.createElement("div",{className:Qn},r.createElement(dr,{className:this.schoolLabelStyle(a),getLabelProps:e(),getInputProps:t({}),placeholder:this.props.placeholder,isLoading:this.state.isLoading,ref:this.inputRef,hideLabel:!!this.props.hideLabel,inputCustomClass:this.props.inputCustomClass,autocompleteIcon:this.props.autocompleteIcon,hideSchool:this.props.hideSchool}),r.createElement(Er,Nr({isOpen:a&&!this.props.schoolErrorMessage,inputValue:l,items:this.state.items,highlightedIndex:i,selectedItem:s,getItemProps:o},n({},{suppressRefError:!0}))),r.createElement(sr,{len:l?l.length:0,schoolErrorMessage:this.props.schoolErrorMessage,isLoading:this.state.isLoading,isHidden:this.props.isHelpfulHintHidden})))))}},Ir=Sr.prototype,Or="loadSchools",xr=[yr],Rr=Object.getOwnPropertyDescriptor(Sr.prototype,"loadSchools"),Ar=Sr.prototype,Lr={},Object.keys(Rr).forEach((function(e){Lr[e]=Rr[e]})),Lr.enumerable=!!Lr.enumerable,Lr.configurable=!!Lr.configurable,("value"in Lr||Lr.initializer)&&(Lr.writable=!0),Lr=xr.slice().reverse().reduce((function(e,t){return t(Ir,Or,e)||e}),Lr),Ar&&void 0!==Lr.initializer&&(Lr.value=Lr.initializer?Lr.initializer.call(Ar):void 0,Lr.initializer=void 0),void 0===Lr.initializer&&(Object.defineProperty(Ir,Or,Lr),Lr=null),Sr);var Ir,Or,xr,Rr,Ar,Lr;let kr;!function(e){e.MANDATORY="mandatory",e.NONE="none",e.OPTIONAL="optional"}(kr||(kr={}));const _r="step-info-QS5k3",Pr="icon-Vu_m1",Dr="override-granite-qWIQs",Fr=({overrideGranite:e=!1,children:t})=>r.createElement("p",{className:l()("subtitle",_r,{[Dr]:e})},r.createElement("i",{className:l()("chi-lightbulb-filled",Pr)}),t),Ur="school-course-form-N18ig",Mr="school-form-KLWqC",jr="btn-edit-school-irmeL",qr="school-dropdown-label-GrKbQ",Gr="school-value-tKnAk",$r=()=>{var e,t,n;const{data:o}=Be(),{school:a,setSchool:s,course:i,setCourse:c,courseSelectorMode:u,setCourseSelectorMode:d,createdCourseDepartment:m,setCreatedCourseDepartment:h,createdCourseNumber:g,setCreatedCourseNumber:f,activeStep:E}=Lt(),{overrideGranite:v}=p(),{incrementNoMatchedDept:b,incrementNoMatchedCourse:w,incrementSelectedCourseCount:y,incrementSelectedDeptCount:S,incrementSelectedSchoolCount:N}=Dt(),[C,T]=r.useState(null),I=(null==i?void 0:i.courseItem)||null,O=r.useRef(null),x=r.useRef(null),R=r.useRef(null),A=r.useRef(null),L=E===Ve.COURSE_SELECTION;r.useEffect((()=>{var e,t,n;L&&(null===a?null==(e=O.current)||e.focus():u===Ct.SELECT_COURSE?null===I&&(null==(t=x.current)||t.focus()):null===m&&0===g.trim().length&&(null==(n=R.current)||n.focus()))}),[I,u,m,g,a,L]);const k=null!=(e=null==o?void 0:o.courseTagMode)?e:kr.OPTIONAL;let _="";u===Ct.SELECT_COURSE&&a&&I?_=Qr(I.text,k):u===Ct.ADD_COURSE&&a&&m&&g.trim().length>0&&(_=Qr(`${m.text} ${g}`,k));const P=k===kr.MANDATORY||k===kr.OPTIONAL?"We will use the course code to match you with the best available tutor. Your information will not be shared or made public.":"This will enable tutors to provide a tailored answer faster",D=e=>{s(e),e&&N()},F=e=>{c(e),e&&y()},U=Ve.COURSE_SELECTION+1;return r.createElement(In,{overrideGranite:v},r.createElement(Nn,{title:`${U}. Enter the course`,isStepOptional:k===kr.OPTIONAL,idleContent:_,stepId:Ve.COURSE_SELECTION,status:L?"active":i?"completed":"upcoming"}),r.createElement(Bt.x1,{padding:{px:0,pb:0}},r.createElement(Fr,{overrideGranite:v},P),r.createElement("div",{className:Ur},r.createElement("div",{className:Mr},r.createElement("div",{className:"form-group"},r.createElement("div",{className:qr},"School name"),(null===a||0===a.schoolId)&&r.createElement(Tr,{placeholder:"e.g. University of San Francisco",currentSchoolName:null!=(t=null==a?void 0:a.schoolName)?t:"",schoolErrorMessage:C,schoolId:null!=(n=null==a?void 0:a.schoolId)?n:0,onChange:e=>{D(e),e&&ke({actionType:Le.ActionType.LINK,text:`Select school: ${e.schoolName}`,intent:"Select school"})},handleError:T,hideLabel:!0,inputCustomClass:"form-control",inputRef:O}),null!==a&&0!==a.schoolId&&r.createElement("div",{className:l()("d-flex",Gr)},a.schoolName,r.createElement("button",{className:l()("btn btn-link",jr),onClick:()=>{D(null),d(Ct.SELECT_COURSE),F(null),h(null),f(""),ke({actionType:Le.ActionType.LINK,text:"Edit pencil icon: Clear school",intent:"Clear school"})}},r.createElement("i",{className:"chi-pencil-filled"}))))),r.createElement(tt,{schoolId:null!==a&&0!==a.schoolId?a.schoolId:null,course:I,setCourse:e=>{(e=>{if(u===Ct.SELECT_COURSE?null===e:null===m||0===g.trim().length)F(null);else{const t={mode:u,courseItem:u===Ct.SELECT_COURSE?e:m,courseNumber:g};F(t)}})(e),e&&ke({actionType:Le.ActionType.LINK,text:`Set question course: ${e.text}`,intent:"Set question course"})},controlledCourseCreation:{createdCourseNumber:g,setCreatedCourseNumber:f,createdCourseDepartment:m,setCreatedCourseDepartment:e=>{h(e),e&&S(),e&&ke({actionType:Le.ActionType.LINK,text:`Set question course department: ${e.text}`,intent:"Set question course department"})},deptAcroRef:R,courseNumRef:A},controlledCourseSelectorMode:{courseSelectorMode:u,setCourseSelectorMode:d,courseNameRef:x},overrideGranite:!0,placeholder:"e.g. BIO 101",onNoDepartmentResults:b,onNoCourseResults:w}))))},Qr=(e,t)=>{const n=t===kr.MANDATORY?42:32;return e.length>n&&(e=e.substring(0,n-3)+"..."),e};var Br=n(2341),Wr=n(1224);const Vr="submit-question-bd4wm",Hr="override-granite-sNcvk",zr="legal-terms-container-OmCBu",Yr=()=>{const{question:e,validationErrors:t,subject:n,course:o,createdCourseDepartment:a,createdCourseNumber:s,school:i,suggestedSubjectsLogId:c,activeStep:u}=Lt(),{data:d}=Be(),{setQuestionId:m}=h(),{overrideGranite:g}=p(),f=(()=>{const e=r.useContext(_t);if(null===e)throw new Error("useStudentQuestionSubmittedContextState was used outside of its Provider");return e})(),[E,v]=r.useState(null),b=!!e&&!!n,w=!!e&&!t,y=!!o||!!a&&s.length>0,S=b&&((null==d?void 0:d.userState)!==We.PREMIER||0===(null==i?void 0:i.schoolId)||y)&&w;return r.useEffect((()=>{0===u&&v(null)}),[u]),b?r.createElement("div",{className:l()(Vr,{[Hr]:g})},r.createElement(Ne.z,{onClick:()=>{ke({actionType:Le.ActionType.PRIMARY,text:"Submit Question",intent:"Submit question"}),Re("submit_question","question_entry","btn_submit_question");const t={question:{type:"multi-answer",questionText:e.questionText,attachments:e.attachments.map((({attachmentId:e})=>e)),categoryId:n.categoryId,suggestedSubjectsLogId:null!=c?c:0,format:It.CKEDITOR,entryPoint:f.questionEntryPoint,variant:""}};null!==i&&null!==o&&null!==o.courseItem&&(o.mode===Ct.SELECT_COURSE?t.course={schoolId:i.schoolId,courseId:o.courseItem.value.courseId,courseName:o.courseItem.value.courseName}:t.course={schoolId:i.schoolId,departmentAcronym:o.courseItem.text,courseNumber:o.courseNumber,courseName:""});const r=(new Date).getTime();(async e=>Me.post("/api/v1/questions/",JSON.stringify(e),{credentials:"same-origin"}))(t).then((({question_id:e})=>{m(e),((e,t)=>{(0,Le.trackEvent)("Student Question Submitted",(0,Le.mergePageProperties)(e),{timestamp:t})})(f,r)})).catch((e=>{var t,n;"Question has been blocked by educators"===(null==e||null==(t=e.error)||null==(n=t.errors)?void 0:n[0])&&v("This question cannot be submitted at this time.")})),xe({interactionType:"click",interactionLocation:"aet_workflow",interactionTarget:"none",action:"create",actionTargetType:"question"})},disabled:!S,variant:"primary"},"Submit question"),r.createElement("p",{className:"body-1 text-alternative-danger-red my-1","aria-live":"assertive",role:"alert"},E),r.createElement("div",{className:l()("p-2 body-1",zr)},r.createElement("span",{className:"d-lg-block"},"You agree to comply with our"," ",r.createElement("a",{href:"/honor-code/",target:"_blank",rel:"noreferrer"},"Honor Code"),","," ",r.createElement("a",{href:"/copyright/#/community-guidelines/",target:"_blank",rel:"noreferrer"},"Community Guidelines"),", and"," ",r.createElement("a",{href:"/copyright/",target:"_blank",rel:"noreferrer"},"Copyright Policy"),". Your question will be shared on Learneo platforms."," ",r.createElement(Wr.u,{className:l()("p-2 border border-neutral-400 rounded shadow-sm",zr),placement:"top",maxWidth:300,text:"CourseHero.com, CliffsNotes.com, CourseSidekick.com, CollegeSidekick.com, and NursingHero.com"},r.createElement(Br.Z,{className:"mb-[4px]",height:18}))," ","We will use your question to (i) extract relevant content to help others study, and (ii) extract matched content from our library to display to you."," ",r.createElement(Wr.u,{className:l()("p-2 border border-neutral-400 rounded shadow-sm",zr),placement:"top",maxWidth:300,text:"Course Hero uses AI to attempt to automatically extract content from documents to surface to you and others so you can study better, e.g., in search results, to enrich docs, and more"},r.createElement(Br.Z,{className:"mb-[4px]",height:18}))))):null},Kr=()=>{const{activeStep:e,setActiveStep:t}=Lt();return r.createElement(r.Fragment,null,r.createElement(Bt.UQ,{selectedIndex:e,onSelect:e=>{null!==e&&t(e)}},r.createElement(Gn,null),r.createElement($r,null)),r.createElement(Yr,null))},Jr={},Zr=(e,t,n,r)=>fetch("/api/v1/users/",(e=>{const t=e.headers||{};return{...e,cache:"no-cache",redirect:"follow",referrer:"no-referrer",headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8",...t}}})({method:"POST",body:JSON.stringify({externalAuthenticator:"apple",idToken:JSON.stringify(e),schoolIdString:t,reg_user_type:n,premier_access_code:r})})).then((async e=>{if(e.status<200||e.status>=300){const t=await(async e=>{try{var t;const n=await e.text(),r=JSON.parse(n);return r&&r.error&&null!=r&&null!=(t=r.error)&&t.message?r.error.message:r&&r.validation?r.validation.join(", "):(console.error(n),"Unknown error occurred")}catch(e){return console.error(e),"Unknown error occurred"}})(e);throw new Error(t)}return await e.json()})),Xr="aetRegistration",eo=e=>{const{clientId:t,redirectURI:n,state:o,entrySource:a,onSignInSuccess:s,schoolId:i,onRegisterAttemptWithNoSchool:c,premierAccessCode:u,useAlternativeStyles:d}=e,[m,p]=r.useState(!1),[h,g]=r.useState(""),[f,E]=r.useState(null),[v,b]=r.useState(!1);r.useEffect((()=>{if(!f||v)return;b(!0);const e=void 0!==window._schoolIdString?window._schoolIdString:"",t=void 0!==window._isTutorRegistration&&window._isTutorRegistration?"tutor":$("#registration_user_type").find(":checked").val();Zr(f,null!=i?i:e,t,u).then((async e=>{if(E(null),b(!1),"success"!==e.status)throw new Error("registration failed, try again later");const t=JSON.parse(e.userDetails);t&&t.isSignUp&&(null==window.amplitudeSignupTracking||window.amplitudeSignupTracking(e.userDetails)),s?s({login_success:t}):window.location.reload()})).catch((e=>{E(null),b(!1)}))}),[f,v,b,s,i,u]),r.useEffect((()=>{if(m){if(""===h&&!v){var e;const r=e=>{"registrationPage"===a&&""===window.loadSchoolData()&&e.stopImmediatePropagation(),a===Xr&&""===window.user_school()&&(c&&c(),e.stopImmediatePropagation())};null==(e=document.getElementById("appleid-signin"))||e.addEventListener("click",r);window.AppleID.auth.init({clientId:t,redirectURI:n,state:JSON.stringify(o),usePopup:!0,scope:"name email"});const s=e=>{const t={authorization:e.detail.authorization,user:e.detail.user||null,redirect_uri:n};E(t)},l=e=>{};return document.addEventListener("AppleIDSignInOnSuccess",s),document.addEventListener("AppleIDSignInOnFailure",l),()=>{var e;null==(e=document.getElementById("appleid-signin"))||e.removeEventListener("click",r),document.removeEventListener("AppleIDSignInOnSuccess",s),document.removeEventListener("AppleIDSignInOnFailure",l)}}}else(r="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",void 0!==Jr[r]?Jr[r]:Jr[r]=new Promise(((e,t)=>{const n=document.createElement("script");n.src=r,n.onload=()=>{e()},n.onerror=(e,n)=>{t(n)},document.head.appendChild(n)}))).then((()=>{p(!0)})).catch((e=>{g(e)}));var r}),[m,p,g,h,v,t,n,o,a,i,c]);const w=v?r.createElement("img",{src:"/img/blue-ajax-loader.gif"}):r.createElement("div",{id:"appleid-signin",className:l()("btn-apple",{"use-alternative-styles":d}),tabIndex:0,"data-color":"black","data-type":window.location.pathname.includes("/register")?"sign-up":"sign-in"});return r.createElement("div",{className:"form-group apple-login"},w)},to=e=>{var t;const{onSuccess:n,onFailure:o,schoolId:a,children:s,className:l}=e,[i,c]=r.useState(null),u=null!=(t=e.disabled)&&t;(0,r.useEffect)((()=>{const e=window.FB,t=window.appId;void 0!==e?void 0!==t?(e.init({appId:t,status:!0,cookie:!0,oauth:!0,version:"v2.12"}),e.getLoginStatus((e=>{"connected"===e.status&&c(e)}),{scope:"email"})):o("Error loading Facebook libraries, cannot register using Facebook [2]"):o("We’re sorry, you must allow 3rd party JavaScript in your browser to continue with Facebook.")}),[o]);const d=({authResponse:e})=>{if(null===e)return;if(!e)return void o("There was an error signing into your account. Please try again. [4]");const{accessToken:t,signedRequest:r}=e;if(t&&r)try{const e=`fb_reg_access_token=${encodeURIComponent(t)}&fb_reg_signed_request=${encodeURIComponent(r)}&registration_user_type=${encodeURIComponent("student")}&registration_school_id_as_string=${encodeURIComponent(null!=a?a:"")}`;let s=!1;fetch("/ajax/create_account.php",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},credentials:"same-origin",body:e}).then((e=>(e.ok&&(s=!0),e.json()))).then((e=>{if(s)n({login_success:e});else{const t=e.error.validation&&e.error.validation.length>0?e.error.validation[0]:"There was an error signing into your account. Please try again. [1]";o(t)}}))}catch(e){o("There was an error signing into your account. Please try again. [2]")}else o("There was an error signing into your account. Please try again. [3]")};return r.createElement("button",{className:l,disabled:u,style:u?{backgroundColor:"grey",cursor:"not-allowed"}:void 0,onClick:()=>{var e;const t=window.FB,n=Math.round((new Date).getTime()/1e3),r=(null==i||null==(e=i.authResponse)?void 0:e.expiresIn)&&i.authResponse.expiresIn>n;i&&r?d(i):t.login(d,{scope:"email"})}},s)},no=e=>{var t,n,o;const{children:a,sitekey:s,captchaToken:l,grecaptchaLoaded:i,setCaptchaToken:c,onClick:u,bypassCaptcha:d,captchaAction:m}=e,p=null!=(t=window.enterpriseCaptchaEnabled)&&t,h=r.useRef(null),g=r.useRef(null);r.useEffect((()=>{if(void 0!==i&&!i)return;const e=window.grecaptcha;p?e.enterprise.render(g.current,{sitekey:s,action:m,badge:"inline",callback:c,"expired-callback":()=>c(null)}):e.render(h.current,{sitekey:s,badge:"inline",callback:c,size:"invisible","expired-callback":()=>c(null)})}),[s,c,i,p,m]);const f=r.useRef(null);r.useEffect((()=>{f.current=l}),[l]);const E=f.current;r.useEffect((()=>{l&&l!==E&&l!==d&&!p&&u(l)}),[l,E,u,d,p]);const v=null!=(n=e.disabled)&&n,b=null!=(o=e.buttonClass)?o:"btn btn-primary",w=!l,y=void 0!==i&&!i;return r.createElement(r.Fragment,null,p?r.createElement("div",{className:"captcha-checkbox-submit"},r.createElement("div",{ref:g}),r.createElement("button",{className:b,style:{marginTop:"16px"},type:w?"button":"submit",disabled:v||!l,onClick:e=>{u(l),e.preventDefault();window.grecaptcha.enterprise.reset()},"aria-label":"Captcha Submit Button","data-testid":"btn-signup-captcha"},a)):r.createElement(r.Fragment,null,y&&r.createElement("span",null,r.createElement("i",{className:"fa fa-spinner fa-spin"})),r.createElement("button",{className:b,style:{display:w?void 0:"none"},ref:h,disabled:v,type:w?"submit":"button","data-testid":"btn-signup"},a),r.createElement("button",{type:w?"button":"submit",className:b,style:{display:w?"none":void 0},disabled:v,onClick:e=>{u(l),e.preventDefault()},"aria-label":"Captcha Submit Button","data-testid":"btn-signup-captcha"},a)))},ro=window&&window.Rollbar||window.console;let oo=window.dataLayer,ao=window.ga;var so;!function(e){e.LoginSuccess="login-success",e.RegistrationSuccess="registration-success",e.InitiateCheckout="initiate-checkout",e.UploadIntent="upload-intent"}(so||(so={}));const lo=e=>{const t="Yes"===e["Pending Educator"];io("Registration","Created Account",t?"Educator":"Student"),co(so.RegistrationSuccess)},io=(e,t,n,r)=>{void 0!==ao&&ao("send","event",e,t,n,r)},co=e=>{void 0!==oo&&oo.push({event:e})},uo="user-auth-XjrGr",mo="free-questions-JOXsB",po="btn-switch-WLROU",ho="ch-account-4Vilu",go="form-group-maclR",fo="btn-edit-school-UGZOx",Eo="remember-forgot-VsCIc",vo="form-check-hseR3",bo="forgot-password-h5C1J",wo="social-account-CZPbP",yo="social-account-or-section-Ya_Fr",So="google-signup-button-XOlW8",No="google-icon-l5X_x",Co="facebook-signup-button-q9P9Q",To="facebook-icon-Avhp4",Io="apple-signup-button-ZHKLB",Oo="social-account-show-tertiary-buttons-qlwPx",xo="recaptcha-submit-qrSjh",Ro="btn-social-w2KUi",Ao="use-alternative-styles-Je4gU",Lo="user-login-QNY5F",ko="prompt-reset-OhmJO",_o="prompt-icon-BNAI1",Po="step-error-bsyfR",Do="educator-learn-more-CDFFa",Fo="error-inline-tG7St",Uo="error-message-S1doY",Mo="form-control-bsgfY";var jo=n(837);n(2321),n(1508);var qo=n(4554);const Go=({onSuccess:e,onFailure:t,schoolId:n,isSignUp:o=!1})=>{const[a,s]=r.useState(400);(0,qo.t2)();r.useEffect((()=>{const e=()=>{var e;const t=document.getElementById("google-login-btn-container"),n=null==t||null==(e=t.parentElement)?void 0:e.clientWidth;s(n||400)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}),[]);return r.createElement(jo.rg,{clientId:window.googleClientId},r.createElement("div",{id:"google-login-btn-container"},r.createElement(jo.kZ,{onSuccess:async({credential:r})=>{const{email:o}=(e=>{if(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(atob(t))}})(r);void 0===r&&t("Failed to login with Google"),await(async(e,t,n,r,o,a)=>{try{const s=await fetch("/api/v1/users/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({idToken:e,externalAuthenticator:"google",email:t,reg_user_type:n,schoolIdString:null!=r?r:""})}),l=await s.json();if(s.ok){const e="string"==typeof l.userDetails?JSON.parse(l.userDetails):l.userDetails;if("object"!=typeof(null==e?void 0:e.userProperties))throw new Error("Failed to pull user details");o({login_success:e})}else a(l.error.validation&&l.error.validation.length>0?l.error.validation[0]:"There was an error signing into your account. Please try again.")}catch(e){a("There was an error signing into your account. Please try again.")}})(null!=r?r:"",o,"student",null!=n?n:"",e,t)},onError:()=>{t("Currently unable to login with Google.")},context:o?"signup":"signin",ux_mode:"popup",type:"standard",text:o?"signup_with":"signin_with",logo_alignment:"center",width:a})))},$o="We've encountered an error while logging in to your user account. Please try again.",Qo=(e,{userId:t,userProperties:n},r="")=>{io("Registration","Logged In"),co(so.LoginSuccess),e.setQueryData(["user",r],(e=>({...e,userId:t,isROWUser:n.isROWUser,isUserVerifiedForQA:n.isUserVerifiedForQA,userState:n["Account Type"]})))},Bo=e=>{const{forgotPassword:t,resetMessage:n}=e,o=(0,i.useMutation)($e),{data:a}=Be("login"),s=(0,i.useQueryClient)(),[c,u]=r.useState(""),[d,m]=r.useState(!1),[p,h]=r.useState(""),[g,f]=r.useState(!1),[E,v]=r.useState(!1),[b,w]=r.useState(""),[y,S]=r.useState(null),N=r.useCallback((e=>{m(!1),f(!1),S(null);let t=!1;if(0===c.trim().length&&(m(!0),t=!0),0===p.trim().length&&(f(!0),t=!0),!t){xe({interactionType:"click",interactionLocation:"aet_workflow",interactionTarget:"none",action:"login",actionTargetType:"user"});const t={email:c,password:p,rememberLogin:E};o.mutate({user:t,captchaToken:e},{onSuccess:e=>{e.login_success?Qo(s,e.login_success):e.error?S(e.error[0]):S($o)},onError:e=>{S(`${$o} ${e}`)}})}}),[s,o,c,p,E]),C=r.useCallback((e=>{ro.error("Social Login Error AAQ",e),S(e)}),[]),T=e=>{e.login_success&&Qo(s,e.login_success)},I=window.__apple_login_props||{},O=void 0!==window.__apple_login_props,x={...I,entrySource:"aetLogin",onSignInSuccess:T};return a?r.createElement("div",{className:l()(Lo,Ao)},r.createElement("form",{method:"post",action:"?jsError=1"},r.createElement("div",{className:ho},y&&r.createElement("div",{className:l()(Uo,Po)},y),n&&r.createElement("div",{className:l()(ko)},r.createElement("i",{className:l()("chi-infomation-circle-filled text-primary",_o)}),r.createElement("p",null,n)),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"email",className:"sr-only"},"Email Address"),r.createElement("input",{type:"email",id:"email",value:c,className:l()("w-100",Mo,{"is-invalid":d}),placeholder:"Email Address",onChange:e=>{u(e.target.value)}}),d&&r.createElement("div",{className:Fo},"Please enter an email address")),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"password",className:"sr-only"},"Password"),r.createElement("input",{type:"password",id:"password",value:p,className:l()("w-100",Mo,{"is-invalid":d}),placeholder:"Password",onChange:e=>{h(e.target.value)}}),g&&r.createElement("div",{className:Fo},"Please enter a password")),r.createElement("div",{className:l()("form-group form-inline justify-content-between",Eo)},r.createElement("div",{className:l()("form-check",vo)},r.createElement("input",{type:"checkbox",className:"form-check-input",id:"remember-me",defaultChecked:E,onChange:()=>{v(!E)}}),r.createElement("label",{className:"form-check-label",htmlFor:"remember-me"},"Keep me logged in")),r.createElement("button",{type:"button",className:l()("btn btn-link",bo),onClick:t},"Forgot password?")),r.createElement("div",{className:l()("d-flex align-items-end",xo)},r.createElement(no,{disabled:o.isLoading,sitekey:a.captchaLoginSiteKey,setCaptchaToken:w,captchaToken:b,buttonClass:"btn btn-primary btn-block",onClick:N,captchaAction:"login"},"Log in to submit question"),o.isLoading&&r.createElement("div",null,r.createElement("i",{className:"chi-simple-spinner spinner spinner-md"}))))),r.createElement("div",{className:l()("d-flex flex-column",wo)},r.createElement("div",{className:l()("align-self-center",yo)},"or"),r.createElement(Go,{onSuccess:T,onFailure:C}),r.createElement(to,{className:l()("btn",Co),onSuccess:T,onFailure:C,disabled:a.facebookDisabled},r.createElement("span",{className:To}),"Log in with Facebook"),a.facebookDisabled&&r.createElement("div",{style:{color:"grey",fontSize:"11px",marginBottom:"12px",marginTop:"8px"}},"Facebook login temporarily unavailable. Please use the"," ",r.createElement("a",{href:"/forgot-password/"},"Forgot Password")," link to access Course Hero using your Facebook account email address."),O&&r.createElement("div",{className:Io},r.createElement(eo,x)))):null},Wo=r.createElement(r.Fragment,null,"By creating an account, you agree with Course Hero's"," ",r.createElement("a",{href:"/terms-of-use/",target:"_blank",rel:"noreferrer"},"Terms of Use")," ","and"," ",r.createElement("a",{href:"/honor-code/",target:"_blank",rel:"noreferrer"},"Honor Code"),", and acknowledge that your personal information will be processed in accordance with our"," ",r.createElement("a",{href:"/privacy-policy/",target:"_blank",rel:"noreferrer"},"Privacy Policy"),".");let Vo;!function(e){e[e.REGISTRATION=0]="REGISTRATION",e[e.LOGIN=1]="LOGIN",e[e.FORGOT_PASSWORD=2]="FORGOT_PASSWORD"}(Vo||(Vo={}));const Ho=()=>{var e,t,n,o;const{data:a}=Be("register"),{school:s}=Rt(),{setSchool:c}=At(),u=(0,i.useMutation)(Qe),d=(0,i.useQueryClient)(),[m,p]=r.useState(!1),[h,g]=r.useState(""),[f,E]=r.useState(!1),[v,b]=r.useState(""),[w,y]=r.useState(!1),[S,N]=r.useState(null),[C,T]=r.useState(!1),[I,O]=r.useState(null),[x,R]=r.useState(!1),[A,L]=r.useState(null),k=r.useRef(null),_=r.useRef(null);r.useEffect((()=>{window.user_school=()=>{var e;return null!=(e=null==s?void 0:s.schoolId.toString())?e:""}}),[null==s?void 0:s.schoolId]),r.useEffect((()=>{var e,t;m?0===h.trim().length&&(null==(e=_.current)||e.focus()):null!==s&&0!==(null==s?void 0:s.schoolId)||null==(t=k.current)||t.focus()}),[h,s,m]);const P=e=>{ro.error("Social Login Error AAQ",e),L(e)},D=e=>{e.login_success&&(lo(e.login_success.userProperties),Qo(d,e.login_success))},F=window.__apple_login_props||{},U=void 0!==window.__apple_login_props,M={...F,entrySource:Xr,onSignInSuccess:D,schoolId:(null==s?void 0:s.schoolId.toString())||"",onRegisterAttemptWithNoSchool:()=>{T(!0)}};return a?r.createElement("div",{className:l()(Ao)},r.createElement("form",{method:"post",action:"?jsError=1"},r.createElement("div",{className:ho},A&&r.createElement("div",{className:l()(Uo,Po)},A),!m&&r.createElement(r.Fragment,null,r.createElement(Tr,{placeholder:"Search for a school",currentSchoolName:null!=(e=null==s?void 0:s.schoolName)?e:"",schoolErrorMessage:S,schoolId:null!=(t=null==s?void 0:s.schoolId)?t:0,onChange:c,handleError:N,hideLabel:!0,labelCustomClass:l()("w-100",{"is-invalid":C}),inputCustomClass:"form-control",hideSchoolNotFound:!0,inputRef:k,className:"w-100"}),C&&r.createElement("div",{className:Fo},"Please select a school"),r.createElement("p",{className:"legal mt-1 mb-2"},"Your information will not be shared or made public"),r.createElement("button",{className:"btn btn-primary btn-block",onClick:e=>{e.preventDefault(),null!==s&&0!==(null==s?void 0:s.schoolId)?p(!0):T(!0)},type:"submit","data-testid":"btn-signup-email"},"Sign up with email")),m&&r.createElement(r.Fragment,null,r.createElement("div",{className:go},r.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},r.createElement("span",null,"Student at ",null==s?void 0:s.schoolName),r.createElement("button",{type:"button",className:l()("btn btn-link",fo),onClick:()=>{c(null),T(!1),p(!1)}},r.createElement("i",{className:"chi-pencil-filled"})))),r.createElement("div",{className:go},r.createElement("label",{htmlFor:"email",className:"sr-only"},"Email Address"),r.createElement("input",{type:"email",id:"email",value:h,autoComplete:"new-email",className:l()("form-control",{"is-invalid":f}),placeholder:"Email Address",onChange:e=>{g(e.target.value)},ref:_}),f&&r.createElement("div",{className:Fo},"Please enter an email address")),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"password",className:"sr-only"},"Password"),r.createElement("input",{type:"password",id:"password",value:v,autoComplete:"new-password",className:l()("form-control",{"is-invalid":f}),placeholder:"Password",onChange:e=>{b(e.target.value)}}),w&&r.createElement("div",{className:Fo},"Please enter a password")),r.createElement("div",{className:l()("d-flex align-items-end",xo)},r.createElement(no,{disabled:x,sitekey:null==a?void 0:a.captchaRegisterSiteKey,setCaptchaToken:O,captchaToken:I,buttonClass:"btn btn-primary btn-block",onClick:e=>{E(!1),y(!1),T(!1),L(null);let t=!1;if(0===h.trim().length&&(E(!0),t=!0),0===v.trim().length&&(y(!0),t=!0),null!==s&&0!==(null==s?void 0:s.schoolId)||(T(!0),t=!0),!t){var n;R(!0),xe({interactionType:"click",interactionLocation:"aet_workflow",interactionTarget:"none",action:"register",actionTargetType:"user"});const t={email:h,password:v,schoolName:0===(null==s?void 0:s.schoolId)?"No School":null!=(n=null==s?void 0:s.schoolName)?n:"",entryPoint:"ask-a-question",captchaToken:e};u.mutate(t,{onSuccess:({login_response:e})=>{e.login_success?(lo(e.login_success.userProperties),Qo(d,e.login_success)):e.error?(R(!1),L(e.error[0])):(R(!1),L("We've encountered an error while logging in to your user account. Please try again."))},onError:e=>{R(!1),L(e.error.validation&&e.error.validation.length>0?e.error.validation[0]:"We've encountered an error while creating the user account. Please try again.")}})}},captchaAction:"register"},"Sign up and continue"),x&&r.createElement("div",null,r.createElement("i",{className:"chi-simple-spinner spinner spinner-md"})))))),m?r.createElement("div",{className:l()(wo,Oo)},"Or, sign up with"," ",r.createElement("button",{className:l()("btn btn-tertiary",Ro),onClick:()=>p(!1)},"Google"),!a.facebookDisabled&&r.createElement(r.Fragment,null,U?", ":" or ",r.createElement(to,{className:l()("btn btn-tertiary",Ro),onSuccess:D,onFailure:P,schoolId:`${null!=(n=null==s?void 0:s.schoolId)?n:""}`},"Facebook")),U?r.createElement(r.Fragment,null,a.facebookDisabled?" or ":", or ",r.createElement("button",{className:l()("btn btn-tertiary",Ro),onClick:()=>p(!1)},"Apple")):null):r.createElement("div",{className:l()(wo,"d-flex flex-column"),style:{marginTop:"16px"}},r.createElement("div",{className:l()(yo,"align-self-center")},"or"),s?r.createElement(r.Fragment,null,r.createElement(Go,{onSuccess:D,onFailure:P,schoolId:`${null!=(o=null==s?void 0:s.schoolId)?o:""}`,isSignUp:!0}),!a.facebookDisabled&&r.createElement(to,{className:l()(Co,"btn"),onSuccess:D,onFailure:P,schoolId:`${null==s?void 0:s.schoolId}`},r.createElement("span",{className:To}),"Sign up with Facebook"),U&&r.createElement("div",{className:Io},r.createElement(eo,M))):r.createElement(r.Fragment,null,r.createElement("button",{className:l()(So,"btn border"),onClick:()=>T(!0),type:"button"},r.createElement("span",{className:No}),"Sign up with Google"),!a.facebookDisabled&&r.createElement("button",{className:l()(Co,"btn"),onClick:()=>T(!0),type:"button"},r.createElement("span",{className:To}),"Sign up with Facebook"),U&&r.createElement("div",{className:Io},r.createElement(eo,M)))),r.createElement("p",{className:"legal mb-2"}," ",Wo," "),r.createElement("p",{className:Do},"Are you an educator?"," ",r.createElement("a",{href:"/educators/",target:"_blank",rel:"noreferrer"},"Learn more"))):null},zo=e=>{const{onResetPassword:t}=e,n=(0,i.useMutation)(Ge),[o,a]=r.useState(""),[s,c]=r.useState(!1),[u,d]=r.useState(null);return r.createElement("form",{method:"post",action:"?jsError=1"},r.createElement("div",{className:ho},u&&r.createElement("div",{className:l()(Uo,Po)},u),r.createElement("div",{className:go},r.createElement("label",{htmlFor:"email",className:"sr-only"},"Email Address"),r.createElement("input",{type:"email",id:"email",value:o,className:l()("form-control",{"is-invalid":s}),placeholder:"Email Address",onChange:e=>{a(e.target.value)}}),s&&r.createElement("div",{className:Fo},"Please enter an email address"))),r.createElement(Qt.f,{type:"submit",variant:"primary",onClick:e=>{null==e||e.preventDefault(),c(!1),0!==o.trim().length?(xe({interactionType:"click",interactionLocation:"aet_workflow",interactionTarget:"none",action:"reset_password",actionTargetType:"user"}),n.mutate(o,{onSuccess:t,onError:d})):c(!0)},isLoading:n.isLoading},"Reset password"))},Yo=()=>{const[e,t]=r.useState(Vo.REGISTRATION),[n,o]=r.useState(null),{data:a}=Be();r.useEffect((()=>{e===Vo.REGISTRATION&&Ae("Account Creation - User Registration"),e===Vo.LOGIN&&Ae("Account Creation - User Login"),e===Vo.FORGOT_PASSWORD&&Ae("Account Creation - Forgot Password")}),[e]);return r.createElement("div",{className:l()(uo)},e===Vo.REGISTRATION&&r.createElement(r.Fragment,null,r.createElement("div",{className:"d-block d-sm-flex"},r.createElement("h1",{className:"h5"},"Create an Account"),a&&a.signUpCredit>0&&r.createElement("span",{className:l()("small font-weight-500 text-secondary-500 ml-0 ml-sm-1 align-self-center",mo)},"First ",null==a?void 0:a.signUpCredit," questions for free")),r.createElement("p",{className:"body-1 mt-1 mb-2"},"Already have an account?"," ",r.createElement("button",{type:"button",className:l()("btn btn-link",po),onClick:()=>{t(Vo.LOGIN)}},"Log in")),r.createElement(Ho,null)),e===Vo.LOGIN&&r.createElement(r.Fragment,null,r.createElement("h1",{className:"h5"},"Log in to your account"),r.createElement("p",{className:"body-1 my-2"},"New to Course Hero?"," ",r.createElement("button",{type:"button",className:l()("btn btn-link",po),onClick:()=>{t(Vo.REGISTRATION)}},"Sign up")),r.createElement(Bo,{forgotPassword:()=>{t(Vo.FORGOT_PASSWORD)},resetMessage:n})),e===Vo.FORGOT_PASSWORD&&r.createElement(r.Fragment,null,r.createElement("h1",{className:"h5"},"Forgot your password?"),r.createElement("p",{className:"body-1 my-1"},"Already have an account?"," ",r.createElement("button",{type:"button",className:l()("btn btn-link",po),onClick:()=>{t(Vo.LOGIN)}},"Log in")),r.createElement(zo,{onResetPassword:e=>{o(e),t(Vo.LOGIN)}})))};class Ko{static pluralize(e,t){return Array.isArray(t)?1===e?t[0]:t[1]:t+(1===e?"":"s")}static boldWord(e,t,n="strong"){var r=new RegExp("("+this.escapeRegExp(t)+")","gi");return e.replace(r,"<"+n+">$1</"+n+">")}static formatNumber(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}static escapeRegExp(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}static removeSpaces(e){return e.replace(/\s+/g,"")}static decodeHtmlEntities(e){return e.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<")}static decode(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}}const Jo="question-preview-container-kqXfh",Zo="question-preview-truncate-overflow-YP2_P";function Xo(){return Xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xo.apply(this,arguments)}const ea=({className:e,...t})=>{var n;const{question:o,subject:a,course:s}=Rt();return r.createElement(v.x,Xo({as:"aside",className:l()("body-2 p-2",Jo,e)},t),r.createElement("strong",{className:"p-0 mb-1"},"Your question"),r.createElement("div",{className:l()("w-100",Zo)},(null==o?void 0:o.plainTextContent)&&r.createElement("p",null,o.plainTextContent)),(null==o?void 0:o.attachments)&&o.attachments.length>0&&r.createElement("p",{className:l()({"mt-2":Boolean(null==o?void 0:o.plainTextContent)})},r.createElement("i",{className:"chi-paperclip fa-paperclip"}),r.createElement("span",{className:"ml-1"},o.attachments.length," ",Ko.pluralize(o.attachments.length,"image"))),(null==s||null==(n=s.courseItem)?void 0:n.text)&&r.createElement("div",{className:"mt-2"},r.createElement("strong",{className:"p-0 mb-1"},"Course"),r.createElement("div",null,s.courseItem.text)))},ta="We've encountered an error while depositing the question. Please try again.",na=({startQuestionWorkflow:e})=>(r.useEffect((()=>{Le.trackElementFocused({containerType:Le.ContainerType.FORM,text:ta,intent:"Question Submission Error"})}),[]),r.createElement(r.Fragment,null,r.createElement("span",{className:"d-block"},ta),r.createElement(Ne.z,{onClick:e,variant:"primary",size:"sm",className:"mt-2"},"Resubmit question"))),ra=e=>(0,i.useMutation)(cn,{onSuccess:t=>{e(t)}}),oa="container-vocqw",aa="override-granite-FxzRF";function sa(){return sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sa.apply(this,arguments)}function la({children:e,className:t}){return r.createElement("div",{className:l()(oa,t)},e)}function ia({children:e}){return r.createElement("div",{className:"row"},r.createElement("div",{className:"col-12 col-sm-4 col-md-5 col-lg-4 col-xl-3"},r.createElement(ea,null)),r.createElement("div",{className:"col-12 col-sm-8 col-md-7 offset-lg-1 col-xl-5 mt-3 mt-sm-0"},e))}const ca={[Ut.AAQFORM]:"AAQ Form",[Ut.ACCOUNT_LOGIN]:"Account Login",[Ut.START_QUESTION_WORKFLOW]:"Start Question Workflow",[Ut.REDIRECT_TO_WAIT_PAGE]:"Redirect to Wait Page"},ua=({sourceApp:e,source:t,className:n,...o})=>{const a=r.useRef(null),s=Mt(),{questionId:i,overrideGranite:c,redirectPath:u}=p(),{setRedirectPath:d}=h(),{isDirty:m}=Lt(),g=r.useRef(!1),f=ra((()=>g.current=!0));r.useEffect((()=>{return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)};function e(e){m&&!g.current?(e.preventDefault(),e.returnValue=""):delete e.returnValue}}),[m]);const E=r.useCallback((()=>{xe({interactionType:"click",interactionLocation:"aet_workflow",interactionTarget:"none",action:"deposit",actionTargetType:"question"}),f.mutate(i,{onSuccess:e=>{d(decodeURI(e.redirect))}})}),[f,i,d]);return r.useEffect((()=>{s===Ut.START_QUESTION_WORKFLOW&&f.isIdle&&E()}),[f,s,E]),r.useEffect((()=>{s===Ut.REDIRECT_TO_WAIT_PAGE&&(window.location.href=u)}),[s,u]),r.useEffect((()=>{Le.trackElementFocused({containerType:Le.ContainerType.MODAL,text:`AAQ Step: ${ca[s]}`}),Ae(ca[s])}),[s]),r.createElement(an,{value:a},r.createElement(v.x,sa({ref:a,className:l()(n,{[aa]:c})},o),s===Ut.AAQFORM&&r.createElement(Kr,null),s===Ut.ACCOUNT_LOGIN&&r.createElement(la,null,r.createElement(ia,null,r.createElement(Yo,null))),(s===Ut.REDIRECT_TO_WAIT_PAGE||s===Ut.START_QUESTION_WORKFLOW)&&(f.isLoading||f.isSuccess)&&r.createElement(la,{className:"d-flex flex-row justify-content-center"},r.createElement($t,null)),(s===Ut.REDIRECT_TO_WAIT_PAGE||s===Ut.START_QUESTION_WORKFLOW)&&f.isError&&r.createElement(la,null,r.createElement(na,{startQuestionWorkflow:E}))))};var da=n(4084);const ma=({isModalOpen:e,closeModal:t,sourceApp:n,source:o,defaultQuestionText:a,isOTManualBlockMode:s})=>(r.useEffect((()=>{var e;const t=null!=(e=window.enterpriseCaptchaEnabled)&&e;if(!document.getElementById("google-recaptcha-script")){const e=document.createElement("script");e.id="google-recaptcha-script",e.async=!0,e.src=t?"https://www.recaptcha.net/recaptcha/enterprise.js":"https://www.google.com/recaptcha/api.js",document.body.appendChild(e)}if(!document.getElementById("gapi-auth2-script")){const e=document.createElement("script");var n;if(e.id="gapi-auth2-script",e.async=!0,e.src="https://apis.google.com/js/platform.js",e.type="text/javascript",s)null!=(n=window.OnetrustActiveGroups)&&n.includes("C0004")||(e.type="text/plain"),e.classList.add("optanon-category-C0004");document.body.appendChild(e)}if(!document.getElementById("facebook-jssdk")){const e=document.createElement("script");var r;if(e.id="facebook-jssdk",e.async=!0,e.src="//connect.facebook.net/en_US/sdk.js",e.type="text/javascript",s)null!=(r=window.OnetrustActiveGroups)&&r.includes("C0004")||(e.type="text/plain"),e.classList.add("optanon-category-C0004"),e.classList.add("ot-vscat-C0004");document.body.appendChild(e)}}),[s]),r.createElement(m,{overrideGranite:"Homework Help Page"!==o,sourceApp:n},r.createElement(kt,{defaultQuestionText:a},r.createElement(Ft,{questionEntryPoint:null!=n?n:"Ask Expert Tutors",abTestRunning:!0},r.createElement(qt,{isModalOpen:e,closeModal:t},r.createElement(ua,{className:"w-100 flex-grow-1",style:{overflow:"auto",zIndex:1},sourceApp:n,source:o})))),r.createElement(da.ReactQueryDevtools,{toggleButtonProps:pa,panelProps:pa,closeButtonProps:pa}))),pa={style:{zIndex:99999999}},ha=e=>{const[t,n]=o().useState(!1),[r,a]=o().useState(null),[s,l]=o().useState(null);return o().useEffect((()=>{const e=async e=>{e.detail.sourceApp&&a(e.detail.sourceApp),e.detail.defaultQuestionText&&l(e.detail.defaultQuestionText),n(!0)};return window.addEventListener("ASK-EXPERT-TUTORS:OPEN-MODAL",e),()=>{window.removeEventListener("ASK-EXPERT-TUTORS:OPEN-MODAL",e)}}),[e.sourceApp]),o().createElement(o().Fragment,null,o().createElement(ma,{isModalOpen:t,closeModal:()=>{l(null),n(!1)},sourceApp:null!=r?r:e.sourceApp,isOTManualBlockMode:e.isOTManualBlockMode,source:e.source,defaultQuestionText:null!=s?s:void 0}))};var ga;const{isOTManualBlockMode:fa=!1}=null!=(ga=window._INITIAL_DATA_)?ga:{},Ea=(e,t)=>(a.render(r.createElement(ha,t),e),()=>a.unmountComponentAtNode(e)),va=(ba="ch-ask-expert-tutors-app",document.getElementById(ba));var ba;va?Ea(va,{isOTManualBlockMode:fa}):window.askExpertTutorsApps&&Object.assign(window.askExpertTutorsApps,{renderAskExpertTutorsApp:Ea})},3313:e=>{e.exports=window.React},4012:e=>{e.exports=window.ReactDOM}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,n,o,a)=>{if(!n){var s=1/0;for(u=0;u<e.length;u++){for(var[n,o,a]=e[u],l=!0,i=0;i<n.length;i++)(!1&a||s>=a)&&Object.keys(r.O).every((e=>r.O[e](n[i])))?n.splice(i--,1):(l=!1,a<s&&(s=a));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={442:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[s,l,i]=n,c=0;if(s.some((t=>0!==e[t]))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(i)var u=i(r)}for(t&&t(n);c<s.length;c++)a=s[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},n=self.webpackJsonpaskexperttutors=self.webpackJsonpaskexperttutors||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[626],(()=>r(9814)));o=r.O(o)})();
//# sourceMappingURL=app.460d9ee89f2728a94b4e.js.map